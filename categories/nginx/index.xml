<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<<<<<<< HEAD
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Nginx on Heartbeat Diary</title>
    <link>https://blog.mletter.cn/categories/nginx/</link>
    <description>Recent content in Nginx on Heartbeat Diary</description>
    <generator>Hugo -- 0.146.5</generator>
    <language>zh</language>
    <lastBuildDate>Sun, 20 Mar 2022 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://blog.mletter.cn/categories/nginx/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>Nginxç®€å•çš„å¸¸è§„ä¼˜åŒ–</title>
      <link>https://blog.mletter.cn/tech/nginx/nginx-optimization/</link>
      <pubDate>Sun, 20 Mar 2022 00:00:00 +0000</pubDate>
      <guid>https://blog.mletter.cn/tech/nginx/nginx-optimization/</guid>
      <description>ä¸»è¦è®²è§£nginxå…·ä½“æœ‰é‚£äº›ä¼˜åŒ–é¡¹</description>
      <content:encoded><![CDATA[<h2 id="é…ç½®nginxçš„work_process">é…ç½®nginxçš„work_process</h2>
<p>æŸ¥çœ‹å½“å‰æœåŠ¡çš„CPUæ ¸å¿ƒæ•°é‡</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@containerd-master1 ~<span class="o">]</span><span class="c1"># grep processor /proc/cpuinfo | wc -l</span>
</span></span><span class="line"><span class="cl"><span class="m">8</span>
</span></span></code></pre></div><p>å¦‚æœä½ éœ€è¦ä¿®æ”¹æ›´å¤šçš„å·¥ä½œè¿›ç¨‹,è¯·ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„<code>work_process</code>å­—æ®µ</p>
<ul>
<li><code>auto</code>: æ ¹æ®ç³»ç»Ÿçš„CPUè‡ªåŠ¨çš„è®¾ç½®å·¥ä½œè¿›ç¨‹æ•°é‡</li>
</ul>
<pre tabindex="0"><code class="language-conf" data-lang="conf">worker_processes  1; # å¯é€‰å€¼ auto
</code></pre><h2 id="é…ç½®work_connections">é…ç½®work_connections</h2>
<p>è¯¥å‚æ•°è¡¨ç¤ºæ¯ä¸ªå·¥ä½œè¿›ç¨‹æœ€å¤§å¤„ç†çš„è¿æ¥æ•°,<code>CentOS</code>é»˜è®¤è¿æ¥æ•°ä¸º1024,è¿æ¥æ•°æ˜¯å¯ä»¥ä¿®æ”¹çš„ã€‚
å¦‚æœéœ€è¦ä¿®æ”¹<code>ulimit</code>å‚æ•°,è¯·ä¿®æ”¹é…ç½®æ–‡ä»¶<code>/etc/security/limits.conf</code></p>
<ul>
<li>noproc æ˜¯ä»£è¡¨æœ€å¤§è¿›ç¨‹æ•°</li>
<li>nofile æ˜¯ä»£è¡¨æœ€å¤§æ–‡ä»¶æ‰“å¼€æ•°</li>
</ul>
<blockquote>
<p>æœ¬æ¬¡ä¿®æ”¹ä»…ä»…ä»¥Rocky Linuxå’ŒCentOSä¸ºä¾‹,ä¸åŒçš„ç³»ç»Ÿä¿®æ”¹æ–¹æ³•å¯èƒ½æœ‰æ‰€å·®å¼‚.</p></blockquote>
<pre tabindex="0"><code class="language-conf" data-lang="conf">* soft nofile 65535
* hard nofile 65535
</code></pre><p>é…ç½®nginxå½“ä¸­çš„<code>work_connections</code></p>
<pre tabindex="0"><code class="language-conf" data-lang="conf">events {
    worker_connections  65535;
    use epoll;
}
</code></pre><blockquote>
<p>ç®€å•çš„æä¸€å˜´ulimitçš„ä½œç”¨: å½“è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶æ•°ç›®è¶…è¿‡æ­¤é™åˆ¶æ—¶ï¼Œè¯¥è¿›ç¨‹å°±ä¼šé€€å‡ºã€‚</p></blockquote>
<h2 id="å¯ç”¨gzipå‹ç¼©">å¯ç”¨gzipå‹ç¼©</h2>
<p>nginxä½¿ç”¨ gzip è¿›è¡Œæ–‡ä»¶å‹ç¼©å’Œè§£å‹ç¼©,æ‚¨å¯ä»¥èŠ‚çœå¸¦å®½å¹¶åœ¨è¿æ¥ç¼“æ…¢æ—¶æé«˜ç½‘ç«™çš„åŠ è½½æ—¶é—´ã€‚</p>
<pre tabindex="0"><code class="language-conf" data-lang="conf">server {
    gzip on;  # å¼€å¯gzip
    gzip_vary on;
    gzip_min_length 10240;
    gzip_proxied expired no-cache no-store private auth;
    gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml;
    gzip_disable &#34;MSIE [1-6]\.&#34;;
}
</code></pre><h2 id="é™åˆ¶nginxè¿æ¥çš„è¶…æ—¶">é™åˆ¶nginxè¿æ¥çš„è¶…æ—¶</h2>
<p>ä¸»è¦æ˜¯ä¸ºäº†å‡å°‘æ‰“å¼€å’Œå…³é—­è¿æ¥æ—¶çš„å¤„ç†å™¨å’Œç½‘ç»œå¼€é”€</p>
<ul>
<li><code>client_body_timeout</code>: è¯¥æŒ‡ä»¤è®¾ç½®è¯·æ±‚ä½“ï¼ˆrequest bodyï¼‰çš„è¯»è¶…æ—¶æ—¶é—´ã€‚ä»…å½“åœ¨ä¸€æ¬¡readstepä¸­ï¼Œæ²¡æœ‰å¾—åˆ°è¯·æ±‚ä½“ï¼Œå°±ä¼šè®¾ä¸ºè¶…æ—¶ã€‚è¶…æ—¶åï¼Œnginxè¿”å›HTTPçŠ¶æ€ç 408</li>
<li><code>client_header_timeout</code>: æŒ‡å®šç­‰å¾…clientå‘é€ä¸€ä¸ªè¯·æ±‚å¤´çš„è¶…æ—¶æ—¶é—´ï¼ˆä¾‹å¦‚:GET / HTTP/1.1)ä»…å½“åœ¨ä¸€æ¬¡readä¸­ï¼Œæ²¡æœ‰æ”¶åˆ°è¯·æ±‚å¤´ï¼Œæ‰ä¼šè¢«è®°å½•ä¸ºè¶…æ—¶</li>
<li><code>keepalive_timeout</code>: æŒ‡å®šäº†ä¸<code>client</code>çš„<code>keep-alive</code>è¿æ¥è¶…æ—¶æ—¶é—´,è¶…è¿‡è¿™ä¸ªæ—¶é—´å,æœåŠ¡å™¨ä¼šå…³å…³é—­è¿æ¥ã€‚</li>
<li><code>send_timeout</code>: æŒ‡å®šå®¢æˆ·ç«¯çš„å“åº”è¶…æ—¶æ—¶é—´ã€‚è¿™ä¸ªè®¾ç½®ä¸ä¼šç”¨äºæ•´ä¸ªè½¬å‘å™¨ï¼Œè€Œæ˜¯åœ¨ä¸¤æ¬¡å®¢æˆ·ç«¯è¯»å–æ“ä½œä¹‹é—´ã€‚å¦‚æœåœ¨è¿™æ®µæ—¶é—´å†…ï¼Œå®¢æˆ·ç«¯æ²¡æœ‰è¯»å–ä»»ä½•æ•°æ®ï¼Œnginxå°±ä¼šå…³é—­è¿æ¥ã€‚</li>
</ul>
<pre tabindex="0"><code class="language-conf" data-lang="conf">http
{
    client_body_timeout 12;
    client_header_timeout 12;
    keepalive_timeout 15;
    send_timeout 10;
}
</code></pre><h2 id="è°ƒæ•´ç¼“å†²åŒºå¤§å°">è°ƒæ•´ç¼“å†²åŒºå¤§å°</h2>
<p>è°ƒæ•´nginxç¼“å†²åŒºä»¥ä¼˜åŒ–æœåŠ¡å™¨æ€§èƒ½ã€‚å¦‚æœç¼“å†²åŒºå¤§å°å¤ªå°ï¼Œé‚£ä¹ˆnginxå°†å†™å…¥ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œå¯¼è‡´å¤§é‡ I/O æ“ä½œä¸æ–­è¿è¡Œã€‚</p>
<pre tabindex="0"><code class="language-conf" data-lang="conf">http
{
    client_body_buffer_size 10K;
    client_header_buffer_size 1k;
    client_max_body_size 8m;
    large_client_header_buffers 4 4k;
}
</code></pre><h2 id="å¯ç”¨æ—¥å¿—è®¿é—®ç¼“å†²åŒº">å¯ç”¨æ—¥å¿—è®¿é—®ç¼“å†²åŒº</h2>
<p>æ—¥å¿—å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒä»¬æœ‰åŠ©äºè§£å†³é—®é¢˜ã€‚å®Œå…¨ç¦ç”¨æ—¥å¿—ä¸æ˜¯ä¸€ä¸ªå¥½çš„åšæ³•ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥å¯ç”¨è®¿é—®æ—¥å¿—ç¼“å†²ã€‚è¿™å°†å…è®¸nginxç¼“å†²ä¸€ç³»åˆ—æ—¥å¿—å¹¶å°†å®ƒä»¬ä¸€æ¬¡å†™å…¥æ—¥å¿—æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å¯¹æ¯ä¸ªè¯·æ±‚åº”ç”¨ä¸åŒçš„æ—¥å¿—æ“ä½œã€‚åœ¨nginxé…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹è¡Œä»¥å…è®¸è®¿é—®æ—¥å¿—ç¼“å†²</p>
<pre tabindex="0"><code class="language-conf" data-lang="conf">http {
    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &#34;$request&#34; &#39;
                      &#39;$status $body_bytes_sent &#34;$http_referer&#34; &#39;
                      &#39;&#34;$http_user_agent&#34; &#34;$http_x_forwarded_for&#34;&#39;;
    # å¼€å¯æ—¥å¿—ç¼“å†²è®¾ç½®
    access_log  logs/access.log main buffer=32k flush=1m;
}
</code></pre><h2 id="è°ƒæ•´é™æ€æ–‡ä»¶ç¼“å­˜">è°ƒæ•´é™æ€æ–‡ä»¶ç¼“å­˜</h2>
<pre tabindex="0"><code class="language-conf" data-lang="conf"># é™æ€æ–‡ä»¶ç¼“å­˜å†…å®¹
location ~* \.(jpg|jpeg|png|gif|ico|css|js)$ {
  expires 90d;
}
</code></pre>]]></content:encoded>
    </item>
  </channel>
=======
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Nginx on å¤ªé˜³å¯ä»¥æ˜¯è“è‰²</title>
        <link>https://blog.mletter.cn/categories/nginx/</link>
        <description>Recent content in Nginx on å¤ªé˜³å¯ä»¥æ˜¯è“è‰²</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <copyright>Live and learn. ğŸŒ±</copyright>
        <lastBuildDate>Sun, 20 Mar 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://blog.mletter.cn/categories/nginx/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Nginxç®€å•çš„å¸¸è§„ä¼˜åŒ–</title>
        <link>https://blog.mletter.cn/tech/nginx/nginx-optimization/</link>
        <pubDate>Sun, 20 Mar 2022 00:00:00 +0000</pubDate>
        
        <guid>https://blog.mletter.cn/tech/nginx/nginx-optimization/</guid>
        <description>&lt;h2 id=&#34;é…ç½®nginxçš„work_process&#34;&gt;&lt;/h&gt;é…ç½®nginxçš„work_process
&lt;/h2&gt;&lt;p&gt;æŸ¥çœ‹å½“å‰æœåŠ¡çš„CPUæ ¸å¿ƒæ•°é‡&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;root@containerd-master1 ~&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# grep processor /proc/cpuinfo | wc -l&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;m&#34;&gt;8&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœä½ éœ€è¦ä¿®æ”¹æ›´å¤šçš„å·¥ä½œè¿›ç¨‹,è¯·ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„&lt;code&gt;work_process&lt;/code&gt;å­—æ®µ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;auto&lt;/code&gt;: æ ¹æ®ç³»ç»Ÿçš„CPUè‡ªåŠ¨çš„è®¾ç½®å·¥ä½œè¿›ç¨‹æ•°é‡&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;worker_processes  1; # å¯é€‰å€¼ auto
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;é…ç½®work_connections&#34;&gt;&lt;/h&gt;é…ç½®work_connections
&lt;/h2&gt;&lt;p&gt;è¯¥å‚æ•°è¡¨ç¤ºæ¯ä¸ªå·¥ä½œè¿›ç¨‹æœ€å¤§å¤„ç†çš„è¿æ¥æ•°,&lt;code&gt;CentOS&lt;/code&gt;é»˜è®¤è¿æ¥æ•°ä¸º1024,è¿æ¥æ•°æ˜¯å¯ä»¥ä¿®æ”¹çš„ã€‚
å¦‚æœéœ€è¦ä¿®æ”¹&lt;code&gt;ulimit&lt;/code&gt;å‚æ•°,è¯·ä¿®æ”¹é…ç½®æ–‡ä»¶&lt;code&gt;/etc/security/limits.conf&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;noproc æ˜¯ä»£è¡¨æœ€å¤§è¿›ç¨‹æ•°&lt;/li&gt;
&lt;li&gt;nofile æ˜¯ä»£è¡¨æœ€å¤§æ–‡ä»¶æ‰“å¼€æ•°&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;æœ¬æ¬¡ä¿®æ”¹ä»…ä»…ä»¥Rocky Linuxå’ŒCentOSä¸ºä¾‹,ä¸åŒçš„ç³»ç»Ÿä¿®æ”¹æ–¹æ³•å¯èƒ½æœ‰æ‰€å·®å¼‚.&lt;/p&gt;&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;* soft nofile 65535
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;* hard nofile 65535
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é…ç½®nginxå½“ä¸­çš„&lt;code&gt;work_connections&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;events {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    worker_connections  65535;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    use epoll;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;ç®€å•çš„æä¸€å˜´ulimitçš„ä½œç”¨: å½“è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶æ•°ç›®è¶…è¿‡æ­¤é™åˆ¶æ—¶ï¼Œè¯¥è¿›ç¨‹å°±ä¼šé€€å‡ºã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;h2 id=&#34;å¯ç”¨gzipå‹ç¼©&#34;&gt;&lt;/h&gt;å¯ç”¨gzipå‹ç¼©
&lt;/h2&gt;&lt;p&gt;nginxä½¿ç”¨ gzip è¿›è¡Œæ–‡ä»¶å‹ç¼©å’Œè§£å‹ç¼©,æ‚¨å¯ä»¥èŠ‚çœå¸¦å®½å¹¶åœ¨è¿æ¥ç¼“æ…¢æ—¶æé«˜ç½‘ç«™çš„åŠ è½½æ—¶é—´ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-gdscript3&#34; data-lang=&#34;gdscript3&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;gzip&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;# å¼€å¯gzip&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;gzip_vary&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;gzip_min_length&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10240&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;gzip_proxied&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;expired&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;no&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;cache&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;no&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;store&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;auth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;gzip_types&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;plain&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;css&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xml&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;text&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;javascript&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;application&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;javascript&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;application&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;xml&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;gzip_disable&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;MSIE [1-6]\.&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;é™åˆ¶nginxè¿æ¥çš„è¶…æ—¶&#34;&gt;&lt;/h&gt;é™åˆ¶nginxè¿æ¥çš„è¶…æ—¶
&lt;/h2&gt;&lt;p&gt;ä¸»è¦æ˜¯ä¸ºäº†å‡å°‘æ‰“å¼€å’Œå…³é—­è¿æ¥æ—¶çš„å¤„ç†å™¨å’Œç½‘ç»œå¼€é”€&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;client_body_timeout&lt;/code&gt;: è¯¥æŒ‡ä»¤è®¾ç½®è¯·æ±‚ä½“ï¼ˆrequest bodyï¼‰çš„è¯»è¶…æ—¶æ—¶é—´ã€‚ä»…å½“åœ¨ä¸€æ¬¡readstepä¸­ï¼Œæ²¡æœ‰å¾—åˆ°è¯·æ±‚ä½“ï¼Œå°±ä¼šè®¾ä¸ºè¶…æ—¶ã€‚è¶…æ—¶åï¼Œnginxè¿”å›HTTPçŠ¶æ€ç 408&lt;/li&gt;
&lt;li&gt;&lt;code&gt;client_header_timeout&lt;/code&gt;: æŒ‡å®šç­‰å¾…clientå‘é€ä¸€ä¸ªè¯·æ±‚å¤´çš„è¶…æ—¶æ—¶é—´ï¼ˆä¾‹å¦‚:GET / HTTP/1.1)ä»…å½“åœ¨ä¸€æ¬¡readä¸­ï¼Œæ²¡æœ‰æ”¶åˆ°è¯·æ±‚å¤´ï¼Œæ‰ä¼šè¢«è®°å½•ä¸ºè¶…æ—¶&lt;/li&gt;
&lt;li&gt;&lt;code&gt;keepalive_timeout&lt;/code&gt;: æŒ‡å®šäº†ä¸&lt;code&gt;client&lt;/code&gt;çš„&lt;code&gt;keep-alive&lt;/code&gt;è¿æ¥è¶…æ—¶æ—¶é—´,è¶…è¿‡è¿™ä¸ªæ—¶é—´å,æœåŠ¡å™¨ä¼šå…³å…³é—­è¿æ¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;send_timeout&lt;/code&gt;: æŒ‡å®šå®¢æˆ·ç«¯çš„å“åº”è¶…æ—¶æ—¶é—´ã€‚è¿™ä¸ªè®¾ç½®ä¸ä¼šç”¨äºæ•´ä¸ªè½¬å‘å™¨ï¼Œè€Œæ˜¯åœ¨ä¸¤æ¬¡å®¢æˆ·ç«¯è¯»å–æ“ä½œä¹‹é—´ã€‚å¦‚æœåœ¨è¿™æ®µæ—¶é—´å†…ï¼Œå®¢æˆ·ç«¯æ²¡æœ‰è¯»å–ä»»ä½•æ•°æ®ï¼Œnginxå°±ä¼šå…³é—­è¿æ¥ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;http
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    client_body_timeout 12;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    client_header_timeout 12;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    keepalive_timeout 15;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    send_timeout 10;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;è°ƒæ•´ç¼“å†²åŒºå¤§å°&#34;&gt;&lt;/h&gt;è°ƒæ•´ç¼“å†²åŒºå¤§å°
&lt;/h2&gt;&lt;p&gt;è°ƒæ•´nginxç¼“å†²åŒºä»¥ä¼˜åŒ–æœåŠ¡å™¨æ€§èƒ½ã€‚å¦‚æœç¼“å†²åŒºå¤§å°å¤ªå°ï¼Œé‚£ä¹ˆnginxå°†å†™å…¥ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œå¯¼è‡´å¤§é‡ I/O æ“ä½œä¸æ–­è¿è¡Œã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;http
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    client_body_buffer_size 10K;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    client_header_buffer_size 1k;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    client_max_body_size 8m;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    large_client_header_buffers 4 4k;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;å¯ç”¨æ—¥å¿—è®¿é—®ç¼“å†²åŒº&#34;&gt;&lt;/h&gt;å¯ç”¨æ—¥å¿—è®¿é—®ç¼“å†²åŒº
&lt;/h2&gt;&lt;p&gt;æ—¥å¿—å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒä»¬æœ‰åŠ©äºè§£å†³é—®é¢˜ã€‚å®Œå…¨ç¦ç”¨æ—¥å¿—ä¸æ˜¯ä¸€ä¸ªå¥½çš„åšæ³•ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥å¯ç”¨è®¿é—®æ—¥å¿—ç¼“å†²ã€‚è¿™å°†å…è®¸nginxç¼“å†²ä¸€ç³»åˆ—æ—¥å¿—å¹¶å°†å®ƒä»¬ä¸€æ¬¡å†™å…¥æ—¥å¿—æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å¯¹æ¯ä¸ªè¯·æ±‚åº”ç”¨ä¸åŒçš„æ—¥å¿—æ“ä½œã€‚åœ¨nginxé…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹è¡Œä»¥å…è®¸è®¿é—®æ—¥å¿—ç¼“å†²&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;http {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    log_format  main  &amp;#39;$remote_addr - $remote_user [$time_local] &amp;#34;$request&amp;#34; &amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                      &amp;#39;$status $body_bytes_sent &amp;#34;$http_referer&amp;#34; &amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                      &amp;#39;&amp;#34;$http_user_agent&amp;#34; &amp;#34;$http_x_forwarded_for&amp;#34;&amp;#39;;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    # å¼€å¯æ—¥å¿—ç¼“å†²è®¾ç½®
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    access_log  logs/access.log main buffer=32k flush=1m;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;è°ƒæ•´é™æ€æ–‡ä»¶ç¼“å­˜&#34;&gt;&lt;/h&gt;è°ƒæ•´é™æ€æ–‡ä»¶ç¼“å­˜
&lt;/h2&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;# é™æ€æ–‡ä»¶ç¼“å­˜å†…å®¹
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;location ~* \.(jpg|jpeg|png|gif|ico|css|js)$ {
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  expires 90d;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
        </item>
        
    </channel>
>>>>>>> e6c11e7684b5a835a7809ddc8609bc9f39cdf2c5
</rss>
