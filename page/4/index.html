<<<<<<< HEAD
<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head>
	<meta name="generator" content="Hugo 0.138.0"><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='Live and learn. ğŸŒ±'>
<title>Pager 4 - å¤ªé˜³å¯ä»¥æ˜¯è“è‰²</title>

<link rel='canonical' href='https://blog.mletter.cn/'>

<link rel="stylesheet" href="https://blog.mletter.cn/scss/style.min.e738e6f23cab51289304e49575e3f627bf3a6f32f7b82812a9ab0c552ae38a78.css"><meta property='og:title' content='å¤ªé˜³å¯ä»¥æ˜¯è“è‰²'>
<meta property='og:description' content='Live and learn. ğŸŒ±'>
<meta property='og:url' content='https://blog.mletter.cn/'>
<meta property='og:site_name' content='å¤ªé˜³å¯ä»¥æ˜¯è“è‰²'>
<meta property='og:type' content='website'><meta property='og:updated_time' content=' 2025-01-01T00:00:00&#43;00:00 '/>
<meta name="twitter:title" content="å¤ªé˜³å¯ä»¥æ˜¯è“è‰²">
<meta name="twitter:description" content="Live and learn. ğŸŒ±"><link rel="alternate" type="application/rss&#43;xml" href="https://blog.mletter.cn/index.xml">
    <link rel="shortcut icon" href="wechat.svg" />
<style>
  :root {
       
      --sys-font-family: -apple-system, "PingFang SC", Georgia, 'Nimbus Roman No9 L', 'Hiragino Sans GB', 'Noto Serif SC', 'Microsoft Yahei', 'WenQuanYi Micro Hei', 'ST Heiti', sans-serif;
      --code-font-family: "JetBrains Mono", Menlo, Monaco, Consolas, "Courier New";
      --article-font-family: -apple-system, "PingFang SC", var(--base-font-family);
  }
</style>






<script src="https://blog.mletter.cn/view-image.min.js"></script>

<script>
  window.ViewImage && ViewImage.init('.article-content img');
</script>



<link rel="stylesheet" href="https://cdn.staticfile.net/highlight.js/11.9.0/styles/tokyo-night-dark.min.css">
<script src="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/highlight.js/11.4.0/highlight.min.js"></script>
<script src="https://cdn.staticfile.net/highlight.js/11.9.0/es/languages/go.min.js"></script>

<script>hljs.initHighlightingOnLoad();</script>
<script>document.addEventListener('DOMContentLoaded', (event) => {document.querySelectorAll('pre code').forEach((el) => {hljs.highlightElement(el);});});</script>





    </head>
    <body class="">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="åˆ‡æ¢èœå•">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="https://blog.mletter.cn/">
                
                    <img src="https://img14.360buyimg.com/ddimg/jfs/t1/77628/23/27254/26944/66bc1a36Fc596606a/d912965b8bba22af.jpg" width="300" height="300" class="site-logo" loading="lazy" alt="Avatar">
                
                </a>
                
                    <span class="emoji">ğŸ¥</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="https://blog.mletter.cn/">å¤ªé˜³å¯ä»¥æ˜¯è“è‰²</a></h1>
            <h2 class="site-description">Live and learn. ğŸŒ±</h2>
        </div>
    </header><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='https://blog.mletter.cn/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœç´¢</span>
            </a>
        </li>
        
        
        <li >
            <a href='https://blog.mletter.cn/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>é¦–é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='https://blog.mletter.cn/posts' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-inbox" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z" /><path d="M4 13h3l3 3h4l3 -3h3" /></svg>
                
                <span>æ–‡ç« </span>
            </a>
        </li>
        
        
        <li >
            <a href='https://blog.mletter.cn/archives' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>å½’æ¡£</span>
            </a>
        </li>
        
        
        <li >
            <a href='https://mletter.cn' target="_blank">
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-health-recognition" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 8v-2a2 2 0 0 1 2 -2h2" /><path d="M4 16v2a2 2 0 0 0 2 2h2" /><path d="M16 4h2a2 2 0 0 1 2 2v2" /><path d="M16 20h2a2 2 0 0 0 2 -2v-2" /><path d="M8.603 9.61a2.04 2.04 0 0 1 2.912 0l.485 .39l.5 -.396a2.035 2.035 0 0 1 2.897 .007a2.104 2.104 0 0 1 0 2.949l-3.397 3.44l-3.397 -3.44a2.104 2.104 0 0 1 0 -2.95z" /></svg>
                
                <span>ä¸»é¡µ</span>
            </a>
        </li>
        
        
        <li >
            <a href='https://pic.mletter.cn' target="_blank">
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-photo-cog" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 8h.01" /><path d="M12 21h-6a3 3 0 0 1 -3 -3v-12a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v6" /><path d="M3 16l5 -5c.928 -.893 2.072 -.893 3 0l3 3" /><path d="M14 14l1 -1c.48 -.461 1.016 -.684 1.551 -.67" /><path d="M19.001 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M19.001 15.5v1.5" /><path d="M19.001 21v1.5" /><path d="M22.032 17.25l-1.299 .75" /><path d="M17.27 20l-1.3 .75" /><path d="M15.97 17.25l1.3 .75" /><path d="M20.733 20l1.3 .75" /></svg>
                
                <span>ç›¸å†Œ</span>
            </a>
        </li>
        
        
        <li >
            <a href='https://blog.mletter.cn/friends' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>å‹è”</span>
            </a>
        </li>
        
        
        <li >
            <a href='https://blog.mletter.cn/about' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
                
            
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>æš—è‰²æ¨¡å¼</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                <form action="https://blog.mletter.cn/search/" class="search-form widget" >
        <p>
            <label>æœç´¢</label>
            <input name="keyword" required placeholder="è¾“å…¥å…³é”®è¯..." />
        
            <button title="æœç´¢">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



            </button>
        </p>
    </form>
            
        
            
                <section class="widget archives">
        <h2 class="widget-title section-title">æ—¥æœŸå½’æ¡£</h2>

        
        
        
        
        
        <div class="widget-archive--list">
            <div class="archives-year">
                    <a href="https://blog.mletter.cn/archives/#2025">
                        
                            <span class="year">2025</span>
                            <span class="count">1</span>
                        
                    </a> 
                </div>
            <div class="archives-year">
                    <a href="https://blog.mletter.cn/archives/#2024">
                        
                            <span class="year">2024</span>
                            <span class="count">14</span>
                        
                    </a> 
                </div>
            <div class="archives-year">
                    <a href="https://blog.mletter.cn/archives/#2023">
                        
                            <span class="year">2023</span>
                            <span class="count">16</span>
                        
                    </a> 
                </div>
            <div class="archives-year">
                    <a href="https://blog.mletter.cn/archives/#2022">
                        
                            <span class="year">2022</span>
                            <span class="count">10</span>
                        
                    </a> 
                </div>
            <div class="archives-year">
                    <a href="https://blog.mletter.cn/archives/#2021">
                        
                            <span class="year">2021</span>
                            <span class="count">3</span>
                        
                    </a> 
                </div>
            <div class="archives-year">
                    <a href="https://blog.mletter.cn/archives/#2020">
                        
                            <span class="year">2020</span>
                            <span class="count">3</span>
                        
                    </a> 
                </div>
            
        </div>
    </section>
            
        
            
                <section class="widget tagCloud">
    <h2 class="widget-title section-title">åˆ†ç±»</h2>

    <div class="tagCloud-tags">
        
            <a href="https://blog.mletter.cn/categories/kubernetes/" class="font_size_21">
                Kubernetes
            </a>
        
            <a href="https://blog.mletter.cn/categories/%E6%97%A5%E8%AE%B0/" class="font_size_11">
                æ—¥è®°
            </a>
        
            <a href="https://blog.mletter.cn/categories/docker/" class="font_size_4">
                Docker
            </a>
        
            <a href="https://blog.mletter.cn/categories/ansible/" class="font_size_3">
                Ansible
            </a>
        
            <a href="https://blog.mletter.cn/categories/mysql/" class="font_size_1">
                Mysql
            </a>
        
            <a href="https://blog.mletter.cn/categories/nginx/" class="font_size_1">
                Nginx
            </a>
        
            <a href="https://blog.mletter.cn/categories/redis/" class="font_size_1">
                Redis
            </a>
        
            <a href="https://blog.mletter.cn/categories/tech/" class="font_size_1">
                Tech
            </a>
        
            <a href="https://blog.mletter.cn/categories/%E4%B8%AA%E4%BA%BA%E9%A1%B9%E7%9B%AE/" class="font_size_1">
                ä¸ªäººé¡¹ç›®
            </a>
        
            <a href="https://blog.mletter.cn/categories/%E5%B7%A5%E5%85%B7%E5%88%86%E4%BA%AB/" class="font_size_1">
                å·¥å…·åˆ†äº«
            </a>
        
    </div>
</section>

            
        
            
                <section class="widget tagCloud">
    <h2 class="widget-title section-title">æ ‡ç­¾äº‘</h2>

    <div class="tagCloud-tags">
        
            <a href="https://blog.mletter.cn/tags/kubernetes/" class="font_size_21">
                Kubernetes
            </a>
        
            <a href="https://blog.mletter.cn/tags/%E9%9A%8F%E7%AC%94/" class="font_size_7">
                éšç¬”
            </a>
        
            <a href="https://blog.mletter.cn/tags/ansible/" class="font_size_3">
                Ansible
            </a>
        
            <a href="https://blog.mletter.cn/tags/docker/" class="font_size_3">
                Docker
            </a>
        
            <a href="https://blog.mletter.cn/tags/%E6%97%85%E6%B8%B8/" class="font_size_2">
                æ—…æ¸¸
            </a>
        
            <a href="https://blog.mletter.cn/tags/api%E6%8E%A5%E5%8F%A3%E5%B7%A5%E5%85%B7/" class="font_size_1">
                APIæ¥å£å·¥å…·
            </a>
        
            <a href="https://blog.mletter.cn/tags/etcd/" class="font_size_1">
                Etcd
            </a>
        
            <a href="https://blog.mletter.cn/tags/gin/" class="font_size_1">
                Gin
            </a>
        
            <a href="https://blog.mletter.cn/tags/gitlab/" class="font_size_1">
                Gitlab
            </a>
        
            <a href="https://blog.mletter.cn/tags/go/" class="font_size_1">
                Go
            </a>
        
    </div>
</section>
            
        
    </aside>


            <main class="main full-width">
    
    
    
    

<div class="welcome">
    <p style="font-size: 2rem; text-align: center; font-weight: bold">
      
      <img alt="logo" class="shake" src="https://api.iconify.design/line-md:moon-alt-to-sunny-outline-loop-transition.svg" decoding="async" data-nimg="future" loading="lazy" style="color: transparent; width: auto; height: auto;  position: relative; nav-down: auto;">
      <span class="jump-text1" > æ¬¢è¿å…‰ä¸´ </span>
      
      <span class="jump-text3" style="color:#97C3C6"> Spring Day Heartbeat Diary </span>
    </p>
  </div>
  
  
    <section class="article-list">
        
            
<article class="has-image">
    <header class="article-header">
        <div class="article-image">
            <a href="https://blog.mletter.cn/tech/api-tools/1/">
                
                    <img src="https://img11.360buyimg.com/ddimg/jfs/t1/120366/32/35885/27184/64a24181F7497ff67/58deb560821eb1b2.jpg" loading="lazy" alt="Featured image of post æ¨èå‡ æ¬¾å¥½ç”¨çš„APIæ–‡æ¡£ç®¡ç†å·¥å…·" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="https://blog.mletter.cn/categories/%E5%B7%A5%E5%85%B7%E5%88%86%E4%BA%AB/" >
                å·¥å…·åˆ†äº«
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="https://blog.mletter.cn/tech/api-tools/1/">æ¨èå‡ æ¬¾å¥½ç”¨çš„APIæ–‡æ¡£ç®¡ç†å·¥å…·</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            äº’è”ç½‘æœåŠ¡å‘å±•è‡³ä»Šï¼Œä½œä¸ºå¼€å‘è€…é˜µè¥çš„æˆ‘ä»¬ï¼Œå·²ç»ç”¨å®è·µè¯æ˜äº†**å‰åç«¯åˆ†ç¦»**å¼€å‘æ¨¡å¼æ­£åœ¨é€æ¸æˆä¸ºè¶Šæ¥è¶Šå¤šäº’è”ç½‘å…¬å¸æ„å»ºæœåŠ¡å’Œåº”ç”¨çš„æ–¹å¼ã€‚ 
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Aug 10, 2023</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 3 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>
</article>
        
            
<article class="has-image">
    <header class="article-header">
        <div class="article-image">
            <a href="https://blog.mletter.cn/tech/kubernetes/openebs/">
                
                    <img src="https://openebs.io/docs/assets/images/control-plane-overview-93c59878e3356a11f03029dd0fc1cd6b.svg" loading="lazy" alt="Featured image of post OpenEBSå­˜å‚¨çš„ä½¿ç”¨" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="https://blog.mletter.cn/categories/kubernetes/" >
                Kubernetes
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="https://blog.mletter.cn/tech/kubernetes/openebs/">OpenEBSå­˜å‚¨çš„ä½¿ç”¨</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">May 14, 2023</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 5 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>
</article>
        
            
<article class="has-image">
    <header class="article-header">
        <div class="article-image">
            <a href="https://blog.mletter.cn/tech/kubernetes/traefik/">
                
                    <img src="https://doc.traefik.io/traefik/assets/img/traefik-architecture.png" loading="lazy" alt="Featured image of post TraekfikåŸºç¡€ä½¿ç”¨æŒ‡å—" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="https://blog.mletter.cn/categories/kubernetes/" >
                Kubernetes
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="https://blog.mletter.cn/tech/kubernetes/traefik/">TraekfikåŸºç¡€ä½¿ç”¨æŒ‡å—</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Apr 07, 2023</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 10 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>
</article>
        
            
<article class="has-image">
    <header class="article-header">
        <div class="article-image">
            <a href="https://blog.mletter.cn/tech/kubernetes/local-storage/">
                
                    <img src="https://img14.360buyimg.com/ddimg/jfs/t1/164569/9/40677/14419/65bc6e4cFa1d8c0c3/5ccf7e6caadc9b83.jpg" loading="lazy" alt="Featured image of post Kubernetes-æœ¬åœ°å­˜å‚¨" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="https://blog.mletter.cn/categories/kubernetes/" >
                Kubernetes
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="https://blog.mletter.cn/tech/kubernetes/local-storage/">Kubernetes-æœ¬åœ°å­˜å‚¨</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            å‰é¢æˆ‘ä»¬æœ‰é€šè¿‡ hostPath æˆ–è€… emptyDir çš„æ–¹å¼æ¥æŒä¹…åŒ–æˆ‘ä»¬çš„æ•°æ®
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Mar 22, 2023</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 9 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>
</article>
        
            
<article class="has-image">
    <header class="article-header">
        <div class="article-image">
            <a href="https://blog.mletter.cn/life-story/6/">
                
                    <img src="https://img11.360buyimg.com/ddimg/jfs/t1/170852/25/36092/117643/640ad741Fe576192d/3f596893cbcf93a4.jpg" loading="lazy" alt="Featured image of post æ‘„å½±æ—¥è®°-é¢å’Œå›­" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="https://blog.mletter.cn/categories/%E6%97%A5%E8%AE%B0/" >
                æ—¥è®°
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="https://blog.mletter.cn/life-story/6/">æ‘„å½±æ—¥è®°-é¢å’Œå›­</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            æœ¬æ¬¡æ‘„å½±æ¥è‡ªå°ç‹-é¢å’Œå›­ç¯æ¸¸è®°
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Mar 10, 2023</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 1 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>
</article>
        
            
<article class="has-image">
    <header class="article-header">
        <div class="article-image">
            <a href="https://blog.mletter.cn/tech/kubernetes/nginx-ingress/">
                
                    <img src="https://d33wubrfki0l68.cloudfront.net/4f01eaec32889ff16ee255e97822b6d165b633f0/a54b4/zh-cn/docs/images/ingress.svg" loading="lazy" alt="Featured image of post Ingressçš„ç®€å•ä½¿ç”¨" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="https://blog.mletter.cn/categories/kubernetes/" >
                Kubernetes
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="https://blog.mletter.cn/tech/kubernetes/nginx-ingress/">Ingressçš„ç®€å•ä½¿ç”¨</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Mar 08, 2023</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    é˜…è¯»æ—¶é•¿: 16 åˆ†é’Ÿ
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>
</article>
        
    </section>
    <nav class='pagination'>
        
        

        
            
                    <a class='page-link' href='https://blog.mletter.cn/'>1</a>
                
            
            
                    
                        
                        <span class='page-link dots'>&hellip;</span>
                    
                
            
            
                    <a class='page-link' href='https://blog.mletter.cn/page/3/'>3</a>
                
            
            
                <span class='page-link current'>4</span>
                
            
            
                    <a class='page-link' href='https://blog.mletter.cn/page/5/'>5</a>
                
            
            
                    
                        
                        <span class='page-link dots'>&hellip;</span>
                    
                
            
            
                    
                
            
            
                    <a class='page-link' href='https://blog.mletter.cn/page/8/'>8</a>
                
            
    </nav>

<footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2020 - 
        
        2025 Live and learn. ğŸŒ±
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo By Netlify</a> <br />
        ä¸»é¢˜ <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.21.0">Stack</a></b> ç”± <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a> è®¾è®¡
    </section>
</footer>

            </main>
        </div>
        <script 
                src="https://lf9-cdn-tos.bytecdntp.com/cdn/expire-1-M/vibrant.js/1.0.0/Vibrant.min.js"crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="https://blog.mletter.cn/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

<script src="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/nprogress/0.2.0/nprogress.min.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/nprogress/0.2.0/nprogress.css" crossorigin="anonymous" />
<script>
    NProgress.start();
    document.addEventListener("readystatechange", () => {
        if (document.readyState === "interactive") NProgress.inc(0.8);
        if (document.readyState === "complete") NProgress.done();
    });
</script>
    </body>
</html>
=======
<!doctype html><html lang=zh dir=auto><head><meta name=generator content="Hugo 0.138.0"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>å¤ªé˜³å¯ä»¥æ˜¯è“è‰²</title>
<meta name=keywords content="Blog,Portfolio,PaperMod"><meta name=description content="ExampleSite description"><meta name=author content="iren."><link rel=canonical href=https://blog.mletter.cn/><link crossorigin=anonymous href=/assets/css/stylesheet.54398d0fb317133a824d0a4034cf0879e64c7449a21217c62f4c262009100d8f.css integrity="sha256-VDmND7MXEzqCTQpANM8IeeZMdEmiEhfGL0wmIAkQDY8=" rel="preload stylesheet" as=style><link rel=icon href=https://blog.mletter.cn/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://blog.mletter.cn/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://blog.mletter.cn/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://blog.mletter.cn/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://blog.mletter.cn/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://blog.mletter.cn/index.xml><link rel=alternate type=application/json href=https://blog.mletter.cn/index.json><link rel=alternate hreflang=zh href=https://blog.mletter.cn/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script src=/view-image.min.js></script><script>window.ViewImage&&ViewImage.init("img")</script><style>:root{--sys-font-family:-apple-system, "PingFang SC", Georgia, 'Nimbus Roman No9 L', 'Hiragino Sans GB', 'Noto Serif SC', 'Microsoft Yahei', 'WenQuanYi Micro Hei', 'ST Heiti', sans-serif;--code-font-family:"JetBrains Mono", Menlo, Monaco, Consolas, "Courier New";--article-font-family:-apple-system, "PingFang SC", var(--base-font-family)}</style><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><meta property="og:url" content="https://blog.mletter.cn/"><meta property="og:site_name" content="å¤ªé˜³å¯ä»¥æ˜¯è“è‰²"><meta property="og:title" content="å¤ªé˜³å¯ä»¥æ˜¯è“è‰²"><meta property="og:description" content="ExampleSite description"><meta property="og:locale" content="zh"><meta property="og:type" content="website"><meta property="og:image" content="https://blog.mletter.cn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.mletter.cn/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="å¤ªé˜³å¯ä»¥æ˜¯è“è‰²"><meta name=twitter:description content="ExampleSite description"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"å¤ªé˜³å¯ä»¥æ˜¯è“è‰²","url":"https://blog.mletter.cn/","description":"ExampleSite description","logo":"https://blog.mletter.cn/%3Clink%20/%20abs%20url%3E","sameAs":["https://space.bilibili.com/477276392","beilanzhisen@163.com"]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://blog.mletter.cn/ accesskey=h title="å¤ªé˜³å¯ä»¥æ˜¯è“è‰² (Alt + H)">å¤ªé˜³å¯ä»¥æ˜¯è“è‰²</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://blog.mletter.cn/ title=ä¸»é¡µ><span class=active>ä¸»é¡µ</span></a></li><li><a href=https://blog.mletter.cn/posts/ title=æ–‡ç« ><span>æ–‡ç« </span></a></li><li><a href=https://blog.mletter.cn/tags/ title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://blog.mletter.cn/friends/ title=å‹è”><span>å‹è”</span></a></li><li><a href=https://blog.mletter.cn/about title=å…³äº><span>å…³äº</span></a></li></ul></nav></header><main class=main><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://d33wubrfki0l68.cloudfront.net/bf8e5eaac697bac89c5b36a0edb8855c860bfb45/6944f/images/docs/nodelocaldns.svg alt></figure><header class=entry-header><h2 class=entry-hint-parent>CacheDNSå’ŒDNSç¼“å­˜</h2></header><div class=entry-content><p>å¦‚æœåœ¨é›†ç¾¤è§„æ¨¡è¾ƒå¤§å¹¶å‘è¾ƒé«˜çš„æƒ…å†µä¸‹æˆ‘ä»¬ä»ç„¶éœ€è¦å¯¹ DNS è¿›è¡Œä¼˜åŒ–ï¼Œå…¸å‹çš„å°±æ˜¯å¤§å®¶æ¯”è¾ƒç†Ÿæ‚‰çš„ CoreDNS ä¼šå‡ºç°è¶…æ—¶5sçš„æƒ…å†µã€‚
è¶…æ—¶åŸå›  åœ¨ iptables æ¨¡å¼ä¸‹ï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼‰ï¼Œæ¯ä¸ªæœåŠ¡çš„ kube-proxy åœ¨ä¸»æœºç½‘ç»œåç§°ç©ºé—´çš„ nat è¡¨ä¸­åˆ›å»ºä¸€äº› iptables è§„åˆ™ã€‚ æ¯”å¦‚åœ¨é›†ç¾¤ä¸­å…·æœ‰ä¸¤ä¸ª DNS æœåŠ¡å™¨å®ä¾‹çš„ kube-dns æœåŠ¡ï¼Œå…¶ç›¸å…³è§„åˆ™å¤§è‡´å¦‚ä¸‹æ‰€ç¤ºï¼š
(1) -A PREROUTING -m comment --comment "kubernetes service portals" -j KUBE-SERVICES &lt;...> (2) -A KUBE-SERVICES -d 10.96.0.10/32 -p udp -m comment --comment "kube-system/kube-dns:dns cluster IP" -m udp --dport 53 -j KUBE-SVC-TCOU7JCQXEZGVUNU &lt;...> (3) -A KUBE-SVC-TCOU7JCQXEZGVUNU -m comment --comment "kube-system/kube-dns:dns" -m statistic --mode random --probability 0.50000000000 -j KUBE-SEP-LLLB6FGXBLX6PZF7 (4) -A KUBE-SVC-TCOU7JCQXEZGVUNU -m comment --comment "kube-system/kube-dns:dns" -j KUBE-SEP-LRVEW52VMYCOUSMZ &lt;...> (5) -A KUBE-SEP-LLLB6FGXBLX6PZF7 -p udp -m comment --comment "kube-system/kube-dns:dns" -m udp -j DNAT --to-destination 10.32.0.6:53 &lt;...> (6) -A KUBE-SEP-LRVEW52VMYCOUSMZ -p udp -m comment --comment "kube-system/kube-dns:dns" -m udp -j DNAT --to-destination 10.32.0.7:53 æˆ‘ä»¬çŸ¥é“æ¯ä¸ª Pod çš„ /etc/resolv.conf æ–‡ä»¶ä¸­éƒ½æœ‰å¡«å……çš„ nameserver 10.96.0.10 è¿™ä¸ªæ¡ç›®ã€‚æ‰€ä»¥æ¥è‡ª Pod çš„ DNS æŸ¥æ‰¾è¯·æ±‚å°†å‘é€åˆ° 10.96.0.10ï¼Œè¿™æ˜¯ kube-dns æœåŠ¡çš„ ClusterIP åœ°å€ã€‚ ç”±äº (1) è¯·æ±‚è¿›å…¥ KUBE-SERVICE é“¾ï¼Œç„¶ååŒ¹é…è§„åˆ™ (2)ï¼Œæœ€åæ ¹æ® (3) çš„ random éšæœºæ¨¡å¼ï¼Œè·³è½¬åˆ° (5) æˆ– (6) æ¡ç›®ï¼Œå°†è¯·æ±‚ UDP æ•°æ®åŒ…çš„ç›®æ ‡ IP åœ°å€ä¿®æ”¹ä¸º DNS æœåŠ¡å™¨çš„å®é™… IP åœ°å€ï¼Œè¿™æ˜¯é€šè¿‡ DNAT å®Œæˆçš„ã€‚å…¶ä¸­ 10.32.0.6 å’Œ 10.32.0.7 æ˜¯æˆ‘ä»¬é›†ç¾¤ä¸­ CoreDNS çš„ä¸¤ä¸ª Pod å‰¯æœ¬çš„ IP åœ°å€ã€‚
...</p></div><footer class=entry-footer><span title='2023-02-26 00:00:00 +0000 UTC'>äºŒæœˆ 26, 2023</span>&nbsp;Â·&nbsp;5 åˆ†é’Ÿ&nbsp;Â·&nbsp;iren.</footer><a class=entry-link aria-label="post link to CacheDNSå’ŒDNSç¼“å­˜" href=https://blog.mletter.cn/tech/kubernetes/nodelocaldns/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://img.linux.net.cn/data/attachment/album/201501/29/141718izklanww82qm888k.png alt></figure><header class=entry-header><h2 class=entry-hint-parent>ä½¿ç”¨Kubeadmåˆ›å»ºä¸€ä¸ªé«˜å¯ç”¨çš„ETCDé›†ç¾¤</h2></header><div class=entry-content><p>ä½¿ç”¨Kubeadmåˆ›å»ºä¸€ä¸ªé«˜å¯ç”¨çš„Etcdé›†ç¾¤ é»˜è®¤æƒ…å†µä¸‹ï¼Œkubeadm åœ¨æ¯ä¸ªæ§åˆ¶å¹³é¢èŠ‚ç‚¹ä¸Šè¿è¡Œä¸€ä¸ªæœ¬åœ° etcd å®ä¾‹ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å¤–éƒ¨çš„ etcd é›†ç¾¤ï¼Œå¹¶åœ¨ä¸åŒçš„ä¸»æœºä¸Šæä¾› etcd å®ä¾‹ã€‚ è¿™ä¸¤ç§æ–¹æ³•çš„åŒºåˆ«åœ¨ é«˜å¯ç”¨æ‹“æ‰‘çš„é€‰é¡¹ é¡µé¢ä¸­é˜è¿°ã€‚
è¿™ä¸ªä»»åŠ¡å°†æŒ‡å¯¼ä½ åˆ›å»ºä¸€ä¸ªç”±ä¸‰ä¸ªæˆå‘˜ç»„æˆçš„é«˜å¯ç”¨å¤–éƒ¨ etcd é›†ç¾¤ï¼Œè¯¥é›†ç¾¤åœ¨åˆ›å»ºè¿‡ç¨‹ä¸­å¯è¢« kubeadm ä½¿ç”¨ã€‚
å‡†å¤‡å¼€å§‹ ä¸‰ä¸ªå¯ä»¥é€šè¿‡ 2379 å’Œ 2380 ç«¯å£ç›¸äº’é€šä¿¡çš„ä¸»æœºã€‚æœ¬æ–‡æ¡£ä½¿ç”¨è¿™äº›ä½œä¸ºé»˜è®¤ç«¯å£ã€‚ä¸è¿‡ï¼Œå®ƒä»¬å¯ä»¥é€šè¿‡ kubeadm çš„é…ç½®æ–‡ä»¶è¿›è¡Œè‡ªå®šä¹‰ã€‚ æ¯ä¸ªä¸»æœºå¿…é¡»å®‰è£… systemd å’Œ bash å…¼å®¹çš„ shellã€‚ æ¯å°ä¸»æœºå¿…é¡»å®‰è£…æœ‰å®¹å™¨è¿è¡Œæ—¶ã€kubelet å’Œ kubeadm æ¯ä¸ªä¸»æœºéƒ½åº”è¯¥èƒ½å¤Ÿè®¿é—® Kubernetes å®¹å™¨é•œåƒä»“åº“ (registry.k8s.io)ï¼Œ æˆ–è€…ä½¿ç”¨ kubeadm config images list/pull åˆ—å‡º/æ‹‰å–æ‰€éœ€çš„ etcd é•œåƒã€‚ æœ¬æŒ‡å—å°†æŠŠ etcd å®ä¾‹è®¾ç½®ä¸ºç”± kubelet ç®¡ç†çš„é™æ€ Podã€‚ ä¸€äº›å¯ä»¥ç”¨æ¥åœ¨ä¸»æœºé—´å¤åˆ¶æ–‡ä»¶çš„åŸºç¡€è®¾æ–½ã€‚ä¾‹å¦‚ ssh å’Œ scp å°±å¯ä»¥æ»¡è¶³éœ€æ±‚ã€‚ æœ¬æ¬¡å®¹å™¨è¿è¡Œæ—¶é‡‡ç”¨Containerdä½œä¸ºRuntime
å°†Kubeleté…ç½®ä¸ºEtcdçš„æœåŠ¡å¯åŠ¨ç®¡ç†å™¨ ä½ å¿…é¡»åœ¨è¦è¿è¡Œ etcd çš„æ‰€æœ‰ä¸»æœºä¸Šæ‰§è¡Œæ­¤æ“ä½œã€‚
cat &lt;&lt; EOF > /usr/lib/systemd/system/kubelet.service.d/20-etcd-service-manager.conf [Service] ExecStart= ExecStart=/usr/bin/kubelet --address=127.0.0.1 --pod-manifest-path=/etc/kubernetes/manifests --cgroup-driver=systemd --container-runtime=remote --container-runtime-endpoint=unix:///run/containerd/containerd.sock Restart=always EOF å¯åŠ¨kubelet
...</p></div><footer class=entry-footer><span title='2023-02-26 00:00:00 +0000 UTC'>äºŒæœˆ 26, 2023</span>&nbsp;Â·&nbsp;3 åˆ†é’Ÿ&nbsp;Â·&nbsp;iren.</footer><a class=entry-link aria-label="post link to ä½¿ç”¨Kubeadmåˆ›å»ºä¸€ä¸ªé«˜å¯ç”¨çš„ETCDé›†ç¾¤" href=https://blog.mletter.cn/tech/kubernetes/install-etcd-ha/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://img14.360buyimg.com/ddimg/jfs/t1/164569/9/40677/14419/65bc6e4cFa1d8c0c3/5ccf7e6caadc9b83.jpg alt></figure><header class=entry-header><h2 class=entry-hint-parent>ConfigMapå’ŒSecretçš„ä½¿ç”¨</h2></header><div class=entry-content><p>ConfigMap ConfigMap æ˜¯ä¸€ç§ API å¯¹è±¡ï¼Œç”¨æ¥å°†éæœºå¯†æ€§çš„æ•°æ®ä¿å­˜åˆ°é”®å€¼å¯¹ä¸­ã€‚ä½¿ç”¨æ—¶ï¼Œ Pods å¯ä»¥å°†å…¶ç”¨ä½œç¯å¢ƒå˜é‡ã€å‘½ä»¤è¡Œå‚æ•°æˆ–è€…å­˜å‚¨å·ä¸­çš„é…ç½®æ–‡ä»¶ã€‚
ConfigMap å°†ä½ çš„ç¯å¢ƒé…ç½®ä¿¡æ¯å’Œ å®¹å™¨é•œåƒ è§£è€¦ï¼Œä¾¿äºåº”ç”¨é…ç½®çš„ä¿®æ”¹ã€‚ ConfigMap åœ¨è®¾è®¡ä¸Šä¸æ˜¯ç”¨æ¥ä¿å­˜å¤§é‡æ•°æ®çš„ã€‚åœ¨ ConfigMap ä¸­ä¿å­˜çš„æ•°æ®ä¸å¯è¶…è¿‡1MiB(è¿™å…¶å®æ˜¯ETCDçš„è¦æ±‚å“ˆå“ˆå“ˆ)ã€‚å¦‚æœä½ éœ€è¦ä¿å­˜è¶…å‡ºæ­¤å°ºå¯¸é™åˆ¶çš„æ•°æ®ï¼Œä½ å¯èƒ½å¸Œæœ›è€ƒè™‘æŒ‚è½½å­˜å‚¨å· æˆ–è€…ä½¿ç”¨ç‹¬ç«‹çš„æ•°æ®åº“æˆ–è€…æ–‡ä»¶æœåŠ¡ã€‚
è¿™æ˜¯ä¸€ä¸ª ConfigMap çš„ç¤ºä¾‹ï¼Œå®ƒçš„ä¸€äº›é”®åªæœ‰ä¸€ä¸ªå€¼ï¼Œå…¶ä»–é”®çš„å€¼çœ‹èµ·æ¥åƒæ˜¯ é…ç½®çš„ç‰‡æ®µæ ¼å¼ã€‚
é€šè¿‡Keyå’ŒValueè¿™ç§é”®å€¼å¯¹æ¥è¿›è¡Œå†™å…¥æ•°æ® apiVersion: v1 kind: ConfigMap metadata: name: game-demo data: # ç±»å±æ€§é”®ï¼›æ¯ä¸€ä¸ªé”®éƒ½æ˜ å°„åˆ°ä¸€ä¸ªç®€å•çš„å€¼ player_initial_lives: "3" ui_properties_file_name: "user-interface.properties" # ç±»æ–‡ä»¶é”®,ä¸€èˆ¬ç”¨æ¥ä¿å­˜ä¸€ä¸ªæ–‡ä»¶åˆ°æŒ‡å®šç›®å½• game.properties: | enemy.types=aliens,monsters player.maximum-lives=5 user-interface.properties: | color.good=purple color.bad=yellow allow.textmode=true ä½ å¯ä»¥ä½¿ç”¨å››ç§æ–¹å¼æ¥ä½¿ç”¨ ConfigMap é…ç½® Pod ä¸­çš„å®¹å™¨ï¼š
åœ¨å®¹å™¨å‘½ä»¤å’Œå‚æ•°å†… å®¹å™¨çš„ç¯å¢ƒå˜é‡ åœ¨åªè¯»å·é‡Œé¢æ·»åŠ ä¸€ä¸ªæ–‡ä»¶ï¼Œè®©åº”ç”¨æ¥è¯»å– ç¼–å†™ä»£ç åœ¨ Pod ä¸­è¿è¡Œï¼Œä½¿ç”¨ Kubernetes API æ¥è¯»å– ConfigMap é€šè¿‡ç¯å¢ƒå˜é‡çš„æ–¹å¼ä½¿ç”¨ConfigMap é¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªDeploymentç„¶åé€šè¿‡Envç¯å¢ƒå˜é‡çš„æ–¹å¼è¿›è¡Œä½¿ç”¨ConfigMap
...</p></div><footer class=entry-footer><span title='2023-02-14 00:00:00 +0000 UTC'>äºŒæœˆ 14, 2023</span>&nbsp;Â·&nbsp;4 åˆ†é’Ÿ&nbsp;Â·&nbsp;iren.</footer><a class=entry-link aria-label="post link to ConfigMapå’ŒSecretçš„ä½¿ç”¨" href=https://blog.mletter.cn/tech/kubernetes/configmap-or-service/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://img14.360buyimg.com/ddimg/jfs/t1/164569/9/40677/14419/65bc6e4cFa1d8c0c3/5ccf7e6caadc9b83.jpg alt></figure><header class=entry-header><h2 class=entry-hint-parent>HorizontalPodAutoscaler</h2></header><div class=entry-content><p>HorizontalPodAutoscaler HPAå®˜æ–¹æ–‡æ¡£ åœ¨Kubernetes ä¸­HorizontalPodAutoscalerè‡ªåŠ¨æ›´æ–°å·¥ä½œè´Ÿè½½èµ„æº ï¼ˆä¾‹å¦‚ Deployment æˆ–è€… StatefulSetï¼‰ï¼Œ ç›®çš„æ˜¯è‡ªåŠ¨æ‰©ç¼©å·¥ä½œè´Ÿè½½ä»¥æ»¡è¶³éœ€æ±‚ã€‚
æ°´å¹³æ‰©ç¼©æ„å‘³ç€å¯¹å¢åŠ çš„è´Ÿè½½çš„å“åº”æ˜¯éƒ¨ç½²æ›´å¤šçš„ Podã€‚ è¿™ä¸å‚ç›´(Vertical)æ‰©ç¼©ä¸åŒï¼Œå¯¹äº Kubernetesï¼Œ å‚ç›´æ‰©ç¼©æ„å‘³ç€å°†æ›´å¤šèµ„æºï¼ˆä¾‹å¦‚ï¼šå†…å­˜æˆ– CPUï¼‰åˆ†é…ç»™å·²ç»ä¸ºå·¥ä½œè´Ÿè½½è¿è¡Œçš„ Podã€‚
å¦‚æœè´Ÿè½½å‡å°‘ï¼Œå¹¶ä¸”Podçš„æ•°é‡é«˜äºé…ç½®çš„æœ€å°å€¼ï¼ŒHorizontalPodAutoscaler ä¼šæŒ‡ç¤ºå·¥ä½œè´Ÿè½½èµ„æºï¼ˆDeploymentã€StatefulSet æˆ–å…¶ä»–ç±»ä¼¼èµ„æºï¼‰ç¼©å‡ã€‚
æ°´å¹³Podè‡ªåŠ¨æ‰©ç¼©ä¸é€‚ç”¨äºæ— æ³•æ‰©ç¼©çš„å¯¹è±¡: ä¾‹å¦‚DemonSetè¿™ç§
æˆ‘ä»¬å¯ä»¥ç®€å•çš„é€šè¿‡ kubectl autoscale å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ª HPA èµ„æºå¯¹è±¡ï¼ŒHPA Controlleré»˜è®¤30sè½®è¯¢ä¸€æ¬¡ï¼ˆå¯é€šè¿‡ kube-controller-manager çš„--horizontal-pod-autoscaler-sync-period å‚æ•°è¿›è¡Œè®¾ç½®ï¼‰ï¼ŒæŸ¥è¯¢æŒ‡å®šçš„èµ„æºä¸­çš„ Pod èµ„æºä½¿ç”¨ç‡ï¼Œå¹¶ä¸”ä¸åˆ›å»ºæ—¶è®¾å®šçš„å€¼å’ŒæŒ‡æ ‡åšå¯¹æ¯”ï¼Œä»è€Œå®ç°è‡ªåŠ¨ä¼¸ç¼©çš„åŠŸèƒ½ã€‚
HorizontalPodAutoscaler æ˜¯å¦‚ä½•å·¥ä½œçš„ Kubernetes å°†æ°´å¹³ Pod è‡ªåŠ¨æ‰©ç¼©å®ç°ä¸ºä¸€ä¸ªé—´æ­‡è¿è¡Œçš„æ§åˆ¶å›è·¯ï¼ˆå®ƒä¸æ˜¯ä¸€ä¸ªè¿ç»­çš„è¿‡ç¨‹ï¼‰ã€‚é—´éš”ç”± kube-controller-manager çš„ --horizontal-pod-autoscaler-sync-period å‚æ•°è®¾ç½®ï¼ˆé»˜è®¤é—´éš”ä¸º 15 ç§’ï¼‰ã€‚
åœ¨æ¯ä¸ªæ—¶é—´æ®µå†…ï¼Œæ§åˆ¶å™¨ç®¡ç†å™¨éƒ½ä¼šæ ¹æ®æ¯ä¸ª HorizontalPodAutoscaler å®šä¹‰ä¸­æŒ‡å®šçš„æŒ‡æ ‡æŸ¥è¯¢èµ„æºåˆ©ç”¨ç‡ã€‚ æ§åˆ¶å™¨ç®¡ç†å™¨æ‰¾åˆ°ç”± scaleTargetRef å®šä¹‰çš„ç›®æ ‡èµ„æºï¼Œç„¶åæ ¹æ®ç›®æ ‡èµ„æºçš„ .spec.selector æ ‡ç­¾é€‰æ‹© Podï¼Œ å¹¶ä»èµ„æºæŒ‡æ ‡ APIï¼ˆé’ˆå¯¹æ¯ä¸ª Pod çš„èµ„æºæŒ‡æ ‡ï¼‰æˆ–è‡ªå®šä¹‰æŒ‡æ ‡è·å–æŒ‡æ ‡ APIï¼ˆé€‚ç”¨äºæ‰€æœ‰å…¶ä»–æŒ‡æ ‡ï¼‰
å¯¹äºæŒ‰ Pod ç»Ÿè®¡çš„èµ„æºæŒ‡æ ‡ï¼ˆå¦‚ CPUï¼‰ï¼Œæ§åˆ¶å™¨ä»èµ„æºæŒ‡æ ‡ API ä¸­è·å–æ¯ä¸€ä¸ª HorizontalPodAutoscaler æŒ‡å®šçš„ Pod çš„åº¦é‡å€¼ï¼Œå¦‚æœè®¾ç½®äº†ç›®æ ‡ä½¿ç”¨ç‡ï¼Œæ§åˆ¶å™¨è·å–æ¯ä¸ª Pod ä¸­çš„å®¹å™¨èµ„æºä½¿ç”¨æƒ…å†µï¼Œ å¹¶è®¡ç®—èµ„æºä½¿ç”¨ç‡ã€‚å¦‚æœè®¾ç½®äº† target å€¼ï¼Œå°†ç›´æ¥ä½¿ç”¨åŸå§‹æ•°æ®ï¼ˆä¸å†è®¡ç®—ç™¾åˆ†æ¯”ï¼‰ã€‚ æ¥ä¸‹æ¥ï¼Œæ§åˆ¶å™¨æ ¹æ®å¹³å‡çš„èµ„æºä½¿ç”¨ç‡æˆ–åŸå§‹å€¼è®¡ç®—å‡ºæ‰©ç¼©çš„æ¯”ä¾‹ï¼Œè¿›è€Œè®¡ç®—å‡ºç›®æ ‡å‰¯æœ¬æ•°ã€‚ å¦‚æœ Pod ä½¿ç”¨è‡ªå®šä¹‰æŒ‡ç¤ºï¼Œæ§åˆ¶å™¨æœºåˆ¶ä¸èµ„æºæŒ‡æ ‡ç±»ä¼¼ï¼ŒåŒºåˆ«åœ¨äºè‡ªå®šä¹‰æŒ‡æ ‡åªä½¿ç”¨åŸå§‹å€¼ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç‡ã€‚ å¦‚æœ Pod ä½¿ç”¨å¯¹è±¡æŒ‡æ ‡å’Œå¤–éƒ¨æŒ‡æ ‡ï¼ˆæ¯ä¸ªæŒ‡æ ‡æè¿°ä¸€ä¸ªå¯¹è±¡ä¿¡æ¯ï¼‰ã€‚ è¿™ä¸ªæŒ‡æ ‡å°†ç›´æ¥æ ¹æ®ç›®æ ‡è®¾å®šå€¼ç›¸æ¯”è¾ƒï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªä¸Šé¢æåˆ°çš„æ‰©ç¼©æ¯”ä¾‹ã€‚ åœ¨ autoscaling/v2 ç‰ˆæœ¬ API ä¸­ï¼Œè¿™ä¸ªæŒ‡æ ‡ä¹Ÿå¯ä»¥æ ¹æ® Pod æ•°é‡å¹³åˆ†åå†è®¡ç®—ã€‚ HorizontalPodAutoscalerçš„å¸¸è§ç”¨é€”æ˜¯å°†å…¶é…ç½®ä¸ºä»èšåˆ API ï¼ˆmetrics.k8s.ioã€custom.metrics.k8s.io æˆ– external.metrics.k8s.ioï¼‰è·å–æŒ‡æ ‡ã€‚ metrics.k8s.io API é€šå¸¸ç”±åä¸ºMetrics Serverçš„æ’ä»¶æä¾›ï¼Œéœ€è¦å•ç‹¬å¯åŠ¨ã€‚æœ‰å…³èµ„æºæŒ‡æ ‡çš„æ›´å¤šä¿¡æ¯ï¼Œ è¯·å‚é˜… Metrics Serverã€‚
...</p></div><footer class=entry-footer><span title='2023-02-14 00:00:00 +0000 UTC'>äºŒæœˆ 14, 2023</span>&nbsp;Â·&nbsp;3 åˆ†é’Ÿ&nbsp;Â·&nbsp;iren.</footer><a class=entry-link aria-label="post link to HorizontalPodAutoscaler" href=https://blog.mletter.cn/tech/kubernetes/horizontal-pod-autoscaler/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://bj.bcebos.com/baidu-rmb-video-cover-1/2b6495c8749e3f4e4369e28cb50eeb87.png alt></figure><header class=entry-header><h2 class=entry-hint-parent>Kubernetesä¸­Api-Serverç®€å•è§£è¯»</h2></header><div class=entry-content><p>è®¿é—®æ§åˆ¶æ¦‚è§ˆ Kubernetes APIçš„æ¯ä¸ªè¯·æ±‚éƒ½ä¼šç»è¿‡å¤šé˜¶æ®µçš„è®¿é—®æ§åˆ¶ä¹‹åæ‰ä¼šè¢«æ¥å—,è¿™ä¸€é˜¶æ®µåŒ…æ‹¬è®¤è¯ã€æˆæƒã€ä»¥åŠå‡†å…¥æ§åˆ¶(Admission Control)ç­‰
è®¤è¯æ’ä»¶ x509è¯ä¹¦ï¼šä½¿ç”¨x509è¯ä¹¦åªéœ€è¦API Serverå¯åŠ¨çš„æ—¶å€™é…ç½® --client-ca-file=SOMEFILEã€‚åœ¨è¯ä¹¦è®¤è¯çš„æ—¶å€™,å…¶CNåŸŸååšç”¨æˆ·å,è€Œç»„ç»‡æœºæ„ç”¨ä½œgroupåã€‚ é™æ€Tokenæ–‡ä»¶ï¼šä½¿ç”¨é™æ€Tokenæ–‡ä»¶è®¤è¯åªéœ€è¦åœ¨API Serverå¯åŠ¨çš„æ—¶å€™é…ç½® --token-auth-file=SOMEFILEã€‚è¯¥æ–‡ä»¶ä¸ºcsvæ ¼å¼,æ¯è¡Œè‡³å°‘åŒ…æ‹¬ä¸‰åˆ—tokenã€usernameã€user id å¼•å¯¼Token ä¸ºäº†æ”¯æŒå¹³æ»‘çš„å¯åŠ¨å’Œå¼•å¯¼æ–°çš„é›†ç¾¤,kubernetesåŒ…å«äº†ä¸€ç§åŠ¨æ€ç®¡ç†çš„æŒæœ‰ä»¤ç‰Œç±»å‹,ç§°ä½œå¯åŠ¨å¼•å¯¼ä»¤ç‰Œ(Bootstrap Token) è¿™äº›ä»¤ç‰Œä»¥Secretçš„å½¢å¼ä¿å­˜åœ¨kube-systemçš„åç§°ç©ºé—´ä¸­,å¯ä»¥åŠ¨æ€çš„ç®¡ç†å’Œåˆ›å»ºã€‚ æ§åˆ¶å™¨ç®¡ç†å™¨åŒ…å«çš„TokenCleaneræ§åˆ¶å™¨èƒ½å¤Ÿåœ¨å¯åŠ¨å¼•å¯¼ä»¤ç‰Œè¿‡æœŸæ—¶å°†å…¶åˆ é™¤ã€‚ åœ¨ä½¿ç”¨kubeadméƒ¨ç½²kubernetesçš„æ—¶å€™,å¯ä»¥é€šè¿‡kubeadm token listè¿›è¡ŒæŸ¥è¯¢ã€‚ ServiceAccountï¼šæ˜¯kubernetesè‡ªåŠ¨ç”Ÿæˆçš„,å¹¶ä¸”ä¼šè‡ªåŠ¨æŒ‚è½½åˆ°å®¹å™¨çš„/run/secrets/kubernetes.io/serviceaccountç›®å½•å½“ä¸­ Webhookä»¤ç‰Œèº«ä»½è®¤è¯ --authentication-token-webhook-config-fileï¼šæŒ‡å‘ä¸€ä¸ªé…ç½®æ–‡ä»¶,å…¶ä¸­æè¿°å¦‚ä½•è®¿é—®è¿œç¨‹çš„WebhookæœåŠ¡ --authentication-token-webhook-cache-ttlï¼šç”¨æ¥è®¾å®šèº«ä»½è®¤è¯å†³å®šçš„ç¼“å­˜æ—¶é—´ã€‚é»˜è®¤ä¸º2åˆ†é’Ÿã€‚ é™æ€Tokenç”¨æ³• æ–°å»ºä¸€ä¸ªå­˜æ”¾é™æ€Tokençš„ç›®å½• mkdir -p /etc/kubernetes/auth å°†Tokenå†…å®¹å†™å…¥åˆ°æ–‡ä»¶å½“ä¸­ æ³¨æ„ï¼šè¯¥æ–‡ä»¶æ ¼å¼ä¸ºCSVæ ¼å¼ï¼Œå…¶å®ä½ ä¹Ÿå¯ä»¥éšä¾¿å†™:happy:
æè¿°ï¼š Tokenå€¼ ç”¨æˆ·åç§° ç”¨æˆ·ID å¯é€‰ç»„å kube-token,kubeadminer,1000,"group1,group2,group3" å‡è®¾è¿™æ˜¯æˆ‘ä»¬è¯·æ±‚åç§°ç©ºé—´çš„è¯·æ±‚: curl -k -v -XGET -H "Authrization: Bearer kube-token" https://api.k8s.version.cn:6443/api/v1/namespaces/default
æ­£å¸¸è¯·æ±‚ä¼šè¿”å›ï¼Œå› ä¸ºæˆ‘æ²¡æœ‰åˆ›å»ºè¿™ä¸ªkube-token
{ "kind": "Status", "apiVersion": "v1", "metadata": { }, "status": "Failure", "message": "namespaces \"default\" is forbidden: User \"system:anonymous\" cannot get resource \"namespaces\" in API group \"\" in the namespace \"default\"", "reason": "Forbidden", "details": { "name": "default", "kind": "namespaces" }, "code": 403 è®¾ç½®API Server æ³¨æ„ï¼š æ“ä½œçš„æ—¶å€™è¯·å¤‡ä»½ä½ çš„API Serveræ–‡ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯.
...</p></div><footer class=entry-footer><span title='2023-02-07 00:00:00 +0000 UTC'>äºŒæœˆ 7, 2023</span>&nbsp;Â·&nbsp;4 åˆ†é’Ÿ&nbsp;Â·&nbsp;iren.</footer><a class=entry-link aria-label="post link to Kubernetesä¸­Api-Serverç®€å•è§£è¯»" href=https://blog.mletter.cn/tech/kubernetes/apiserver-read/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://img14.360buyimg.com/ddimg/jfs/t1/164569/9/40677/14419/65bc6e4cFa1d8c0c3/5ccf7e6caadc9b83.jpg alt></figure><header class=entry-header><h2 class=entry-hint-parent>kubernetes-dashboard</h2></header><div class=entry-content><p>å®˜æ–¹WebUIéƒ¨ç½² Dashboard å®‰è£…éƒ¨ç½² ä»å®˜æ–¹ä»“åº“éƒ¨ç½²
[root@containerd-kube-master ~]# kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.6.1/aio/deploy/recommended.yaml å¦‚æœæ— æ³•ä¸‹è½½è¯·æ–°å»ºdashboard.yamlå¤åˆ¶ä»¥ä¸‹å†…å®¹è¿›è¡Œåº”ç”¨
# Copyright 2017 The Kubernetes Authors. # # Licensed under the Apache License, Version 2.0 (the "License"); # you may not use this file except in compliance with the License. # You may obtain a copy of the License at # # http://www.apache.org/licenses/LICENSE-2.0 # # Unless required by applicable law or agreed to in writing, software # distributed under the License is distributed on an "AS IS" BASIS, # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. # See the License for the specific language governing permissions and # limitations under the License. apiVersion: v1 kind: Namespace metadata: name: kubernetes-dashboard --- apiVersion: v1 kind: ServiceAccount metadata: labels: k8s-app: kubernetes-dashboard name: kubernetes-dashboard namespace: kubernetes-dashboard --- kind: Service apiVersion: v1 metadata: labels: k8s-app: kubernetes-dashboard name: kubernetes-dashboard namespace: kubernetes-dashboard spec: ports: - port: 443 targetPort: 8443 selector: k8s-app: kubernetes-dashboard --- apiVersion: v1 kind: Secret metadata: labels: k8s-app: kubernetes-dashboard name: kubernetes-dashboard-certs namespace: kubernetes-dashboard type: Opaque --- apiVersion: v1 kind: Secret metadata: labels: k8s-app: kubernetes-dashboard name: kubernetes-dashboard-csrf namespace: kubernetes-dashboard type: Opaque data: csrf: "" --- apiVersion: v1 kind: Secret metadata: labels: k8s-app: kubernetes-dashboard name: kubernetes-dashboard-key-holder namespace: kubernetes-dashboard type: Opaque --- kind: ConfigMap apiVersion: v1 metadata: labels: k8s-app: kubernetes-dashboard name: kubernetes-dashboard-settings namespace: kubernetes-dashboard --- kind: Role apiVersion: rbac.authorization.k8s.io/v1 metadata: labels: k8s-app: kubernetes-dashboard name: kubernetes-dashboard namespace: kubernetes-dashboard rules: # Allow Dashboard to get, update and delete Dashboard exclusive secrets. - apiGroups: [""] resources: ["secrets"] resourceNames: ["kubernetes-dashboard-key-holder", "kubernetes-dashboard-certs", "kubernetes-dashboard-csrf"] verbs: ["get", "update", "delete"] # Allow Dashboard to get and update 'kubernetes-dashboard-settings' config map. - apiGroups: [""] resources: ["configmaps"] resourceNames: ["kubernetes-dashboard-settings"] verbs: ["get", "update"] # Allow Dashboard to get metrics. - apiGroups: [""] resources: ["services"] resourceNames: ["heapster", "dashboard-metrics-scraper"] verbs: ["proxy"] - apiGroups: [""] resources: ["services/proxy"] resourceNames: ["heapster", "http:heapster:", "https:heapster:", "dashboard-metrics-scraper", "http:dashboard-metrics-scraper"] verbs: ["get"] --- kind: ClusterRole apiVersion: rbac.authorization.k8s.io/v1 metadata: labels: k8s-app: kubernetes-dashboard name: kubernetes-dashboard rules: # Allow Metrics Scraper to get metrics from the Metrics server - apiGroups: ["metrics.k8s.io"] resources: ["pods", "nodes"] verbs: ["get", "list", "watch"] --- apiVersion: rbac.authorization.k8s.io/v1 kind: RoleBinding metadata: labels: k8s-app: kubernetes-dashboard name: kubernetes-dashboard namespace: kubernetes-dashboard roleRef: apiGroup: rbac.authorization.k8s.io kind: Role name: kubernetes-dashboard subjects: - kind: ServiceAccount name: kubernetes-dashboard namespace: kubernetes-dashboard --- apiVersion: rbac.authorization.k8s.io/v1 kind: ClusterRoleBinding metadata: name: kubernetes-dashboard roleRef: apiGroup: rbac.authorization.k8s.io kind: ClusterRole name: kubernetes-dashboard subjects: - kind: ServiceAccount name: kubernetes-dashboard namespace: kubernetes-dashboard --- kind: Deployment apiVersion: apps/v1 metadata: labels: k8s-app: kubernetes-dashboard name: kubernetes-dashboard namespace: kubernetes-dashboard spec: replicas: 1 revisionHistoryLimit: 10 selector: matchLabels: k8s-app: kubernetes-dashboard template: metadata: labels: k8s-app: kubernetes-dashboard spec: securityContext: seccompProfile: type: RuntimeDefault containers: - name: kubernetes-dashboard image: kubernetesui/dashboard:v2.6.1 imagePullPolicy: Always ports: - containerPort: 8443 protocol: TCP args: - --auto-generate-certificates - --namespace=kubernetes-dashboard # Uncomment the following line to manually specify Kubernetes API server Host # If not specified, Dashboard will attempt to auto discover the API server and connect # to it. Uncomment only if the default does not work. # - --apiserver-host=http://my-address:port volumeMounts: - name: kubernetes-dashboard-certs mountPath: /certs # Create on-disk volume to store exec logs - mountPath: /tmp name: tmp-volume livenessProbe: httpGet: scheme: HTTPS path: / port: 8443 initialDelaySeconds: 30 timeoutSeconds: 30 securityContext: allowPrivilegeEscalation: false readOnlyRootFilesystem: true runAsUser: 1001 runAsGroup: 2001 volumes: - name: kubernetes-dashboard-certs secret: secretName: kubernetes-dashboard-certs - name: tmp-volume emptyDir: {} serviceAccountName: kubernetes-dashboard nodeSelector: "kubernetes.io/os": linux # Comment the following tolerations if Dashboard must not be deployed on master tolerations: - key: node-role.kubernetes.io/master effect: NoSchedule --- kind: Service apiVersion: v1 metadata: labels: k8s-app: dashboard-metrics-scraper name: dashboard-metrics-scraper namespace: kubernetes-dashboard spec: ports: - port: 8000 targetPort: 8000 selector: k8s-app: dashboard-metrics-scraper --- kind: Deployment apiVersion: apps/v1 metadata: labels: k8s-app: dashboard-metrics-scraper name: dashboard-metrics-scraper namespace: kubernetes-dashboard spec: replicas: 1 revisionHistoryLimit: 10 selector: matchLabels: k8s-app: dashboard-metrics-scraper template: metadata: labels: k8s-app: dashboard-metrics-scraper spec: securityContext: seccompProfile: type: RuntimeDefault containers: - name: dashboard-metrics-scraper image: kubernetesui/metrics-scraper:v1.0.8 ports: - containerPort: 8000 protocol: TCP livenessProbe: httpGet: scheme: HTTP path: / port: 8000 initialDelaySeconds: 30 timeoutSeconds: 30 volumeMounts: - mountPath: /tmp name: tmp-volume securityContext: allowPrivilegeEscalation: false readOnlyRootFilesystem: true runAsUser: 1001 runAsGroup: 2001 serviceAccountName: kubernetes-dashboard nodeSelector: "kubernetes.io/os": linux # Comment the following tolerations if Dashboard must not be deployed on master tolerations: - key: node-role.kubernetes.io/master effect: NoSchedule volumes: - name: tmp-volume emptyDir: {} åˆ›å»ºåº”ç”¨
...</p></div><footer class=entry-footer><span title='2023-02-03 00:00:00 +0000 UTC'>äºŒæœˆ 3, 2023</span>&nbsp;Â·&nbsp;5 åˆ†é’Ÿ&nbsp;Â·&nbsp;iren.</footer><a class=entry-link aria-label="post link to kubernetes-dashboard" href=https://blog.mletter.cn/tech/kubernetes/kube-dashboard/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://img12.360buyimg.com/ddimg/jfs/t1/52521/8/22190/1015219/63b4f0deFd2378228/7dd2825c978f8f8c.jpg alt></figure><header class=entry-header><h2 class=entry-hint-parent>æ—…è¡Œæ—¥è®°-è·¨å¹´â€¢å¤©æ´¥</h2></header><div class=entry-content><p>2022ç»ˆå°†é€å» 2022çš„æœ€åä¸€å¤©,å’Œæœ‹å‹ä¸€èµ·åè½¦å»äº†å¤©æ´¥ã€‚ æ—©ä¸Šäº”ç‚¹èµ·åºŠå¼€å§‹æ”¶æ‹¾ä¸œè¥¿äº†,å¿™å‰å¿™åçš„å‘ç°åå…¬äº¤å·²ç»èµ¶ä¸ä¸Šäº†,ç®—äº†è¿˜æ˜¯æ‰“è½¦å§ã€‚ä¸Šé«˜é“çš„æ—¶å€™çœŸçš„æ˜¯å¤ªå›°äº†â€¦ä»¥è‡³äºä¸€è·¯ä¸Šæ²¡æ‹åˆ°ä»€ä¹ˆé£æ™¯ã€‚
å…¶å®æœ‰ä¸€ä¸ªèƒ½å’Œä½ è¯´èµ°å°±èµ°çš„æœ‹å‹çœŸçš„å¾ˆå¥½
è¯´ä¸€ä¸‹æ­¤è¡Œæ™¯ç‚¹ Day1: å’Œæœ‹å‹ç›´æ¥ååˆ°æ»¨æµ·->è€ç å¤´(å®åˆ™æ²¡å»)->å›½å®¶æµ·æ´‹åšç‰©é¦†(å­¦äº†å¾ˆå¤š)->ä¸œå ¤å…¬å›­(çœ‹æ—¥å‡ºğŸŒ„) Day2ï¼šå’Œæœ‹å‹ä»æ»¨æµ·ååˆ°å¤©æ´¥->äº”å¤§é“->æ„å¤§åˆ©é£æƒ…åŒº->å¸‚åŒº çœ‹æµ· çœ‹æµ·æ˜¯æˆ‘è§‰å¾—äººç”Ÿä¸­æœ€å¿«ä¹çš„äº‹æƒ…(å¯¹æµ·æœ‰ä¸€ç§çˆ±ä¸é‡Šæ‰‹çš„æ„Ÿè§‰),æ¯æ¬¡ä¸€çœ‹åˆ°æµ·å°±èƒ½æ„Ÿè§‰åˆ°è®©è‡ªå·±çš„å…¨èº«æ”¾ç©º,çœŸçš„å¤ªå¥½çœ‹äº†ã€‚æŠŠçƒ‚äº‹ä¸¢åœ¨2022! æˆ‘åœ¨å¤©æ´¥å¾ˆæƒ³ä½  è¿™ä¸ªåº”è¯¥æ˜¯åº—å®¶è‡ªå·±ä¹°çš„,æ¥æ‹ç…§çš„äººä¸ç®—å¾ˆå¤š,ä½†æ˜¯ä¹Ÿæ˜¯ä¸€ä¸ªæ ‡å¿—æ€§çš„æŸ±å­äº†(å“ˆå“ˆ). é‡Œé¢æ˜¯ä¸€ä¸ªå·å°é¦†,ç”±äºæˆ‘æœ‹å‹ä¸èƒ½åœ¨å¤–é¢åƒé¥­(æ— ç¼˜å“å°äº†) åŸå¸‚å¤œæ™¯ ä¸å¾—ä¸è¯´,æˆ‘è§‰å¾—å¤©æ´¥çœŸçš„æ¯”åŒ—äº¬æœ‰çƒŸç«æ°”çš„å¤šã€‚ æˆ‘åœ¨è§£æ”¾æ¡¥æµ·æ²³ä¸Šçœ‹åˆ°äº†å¤©æ´¥çš„çƒŸèŠ±,è¶³è¶³åœ°æ”¾äº†2ä¸ªå¤šå°æ—¶â€¦æ˜¯ä¸€ä¸ªé€‚åˆç”Ÿæ´»çš„åŸå¸‚,è·¯ä¸Šçš„è¡Œäººä¹Ÿéå¸¸éå¸¸çš„å¤š(ä¸çŸ¥é“æ˜¯ä¸æ˜¯å› ä¸ºèŠ‚å‡æ—¥çš„åŸå› )ã€‚è·¯ä¸Šé¡ºå¸¦æ‹äº†å‡ å¼ å¤©æ´¥çš„åŸå¸‚å¤œæ™¯ã€‚
è‡ªå·±ç»™å®ƒå–ä¸ªåå­—(æ ¼æ—å¨æ²»å¤§é’Ÿ) â€“å¯ä»¥å¬å¬äº”æœˆå¤©çš„ã€Šæ­¥æ­¥ã€‹ æ ¼æ—å¨æ²»å¤§é’Ÿå‰ å½’é›¶è¶…è½½çš„ä¼¤æ‚² èƒŒç€æˆ‘å’Œæˆ‘çš„è¯ºè¨€ ä¸€èµ·è®¡åˆ’çš„è·¯çº¿å¯¹ç…§å­¤å•çš„æ—…åº— è¡—å¤´éšä¾¿æ‹çš„-å›æ¥æäº†ä¸ªå¾·å›½è¡—å¤´çš„è°ƒè‰²</p></div><footer class=entry-footer><span title='2023-01-01 00:00:00 +0000 UTC'>ä¸€æœˆ 1, 2023</span>&nbsp;Â·&nbsp;1 åˆ†é’Ÿ&nbsp;Â·&nbsp;iren.</footer><a class=entry-link aria-label="post link to æ—…è¡Œæ—¥è®°-è·¨å¹´â€¢å¤©æ´¥" href=https://blog.mletter.cn/tourists/tianjin/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://img14.360buyimg.com/ddimg/jfs/t1/164569/9/40677/14419/65bc6e4cFa1d8c0c3/5ccf7e6caadc9b83.jpg alt></figure><header class=entry-header><h2 class=entry-hint-parent>kubernetes1.22.0å•èŠ‚ç‚¹é›†ç¾¤éƒ¨ç½²</h2></header><div class=entry-content><p>kubernetes1.22.10éƒ¨ç½² å‡†å¤‡å·¥ä½œ å…¼å®¹çš„ Linux ä¸»æœºã€‚Kubernetes é¡¹ç›®ä¸ºåŸºäº Debian å’Œ Red Hat çš„ Linux å‘è¡Œç‰ˆä»¥åŠé‚£äº›æ²¡æœ‰åŒ…ç®¡ç†å™¨çš„å‘è¡Œç‰ˆæä¾›äº†é€šç”¨è¯´æ˜ã€‚ æ¯å°æœºå™¨ 2 GB æˆ–æ›´å¤š RAMï¼ˆä»»ä½•æ›´å°‘éƒ½ä¼šä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºç•™ä¸‹å¾ˆå°çš„ç©ºé—´ï¼‰ã€‚ 2 ä¸ª CPU æˆ–æ›´å¤šã€‚ é›†ç¾¤ä¸­æ‰€æœ‰æœºå™¨ä¹‹é—´çš„å®Œæ•´ç½‘ç»œè¿æ¥ï¼ˆå…¬å…±æˆ–ä¸“ç”¨ç½‘ç»œéƒ½å¯ä»¥ï¼‰ã€‚ æ¯ä¸ªèŠ‚ç‚¹çš„å”¯ä¸€ä¸»æœºåã€MAC åœ°å€å’Œ product_uuidã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§æ­¤å¤„ã€‚ æ‚¨çš„æœºå™¨ä¸Šçš„æŸäº›ç«¯å£æ˜¯å¼€æ”¾çš„ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§æ­¤å¤„ã€‚ äº¤æ¢Swapåˆ†åŒºã€‚å¿…é¡»ç¦ç”¨Swapæ‰èƒ½ä½¿ kubelet æ­£å¸¸å·¥ä½œã€‚ æˆ‘çš„æœåŠ¡å™¨é…ç½®åˆ—è¡¨ æ²¡æœ‰å¿…è¦æŒ‰ç…§æˆ‘çš„è¿™ä¸ªé…ç½®å»æ“ä½œä¸ªäººå»ºè®®å®éªŒç¯å¢ƒï¼šæ­£å¸¸æ¼”ç¤ºç¯å¢ƒ2æ ¸2Gå°±å¤Ÿäº†
éœ€è¦å¼€æ”¾çš„ç«¯å£ è™½ç„¶ etcd ç«¯å£åŒ…å«åœ¨æ§åˆ¶å¹³é¢éƒ¨åˆ†ï¼Œä½†æ‚¨ä¹Ÿå¯ä»¥åœ¨å¤–éƒ¨æˆ–è‡ªå®šä¹‰ç«¯å£ä¸Šæ‰˜ç®¡è‡ªå·±çš„ etcd é›†ç¾¤ã€‚ å¯ä»¥è¦†ç›–æ‰€æœ‰é»˜è®¤ç«¯å£å·ã€‚å½“ä½¿ç”¨è‡ªå®šä¹‰ç«¯å£æ—¶ï¼Œè¿™äº›ç«¯å£éœ€è¦æ‰“å¼€è€Œä¸æ˜¯æ­¤å¤„æåˆ°çš„é»˜è®¤å€¼ã€‚ ä¸€ä¸ªå¸¸è§çš„ä¾‹å­æ˜¯ API æœåŠ¡å™¨ç«¯å£ï¼Œæœ‰æ—¶ä¼šåˆ‡æ¢åˆ° 443ã€‚æˆ–è€…ï¼Œé»˜è®¤ç«¯å£ä¿æŒåŸæ ·ï¼ŒAPI æœåŠ¡å™¨æ”¾åœ¨è´Ÿè½½å‡è¡¡å™¨åé¢ï¼Œè¯¥è´Ÿè½½å‡è¡¡å™¨ç›‘å¬ 443 å¹¶å°†è¯·æ±‚è·¯ç”±åˆ°é»˜è®¤ç«¯å£ä¸Šçš„ API æœåŠ¡å™¨ã€‚
å‡†å¤‡ä¸»æœºåœ°å€ ä¿®æ”¹æ¯ä¸€å°ä¸»æœºçš„/etc/hostsé…ç½® # vim /etc/hosts 10.1.6.45 containerd-kube-master 10.1.6.46 containerd-kube-work1 10.1.6.47 containerd-kube-work2 å…³é—­swapåˆ†åŒºä»¥åŠé˜²ç«å¢™ è¿›å…¥fstabåæ‰¾åˆ°ä½ æŒ‚è½½çš„swapåˆ†åŒºæ³¨é‡Šå³å¯.
[root@bogon ~]# swapoff -a [root@localhost ~]# echo "vm.swappiness = 0" >> /etc/sysctl.conf [root@bogon ~]# vim /etc/fstab # /dev/mapper/rl-swap none swap defaults 0 0 [root@localhost ~]# systemctl stop firewalld && systemctl disable firewalld # å…³é—­å¹¶ä¸”ç¦ç”¨é˜²ç«å¢™ æ‰€æœ‰å†…å®¹å‡†å¤‡å®Œæˆåé‡å¯ä¸‰å°æœåŠ¡å™¨!
...</p></div><footer class=entry-footer><span title='2022-12-29 00:00:00 +0000 UTC'>åäºŒæœˆ 29, 2022</span>&nbsp;Â·&nbsp;5 åˆ†é’Ÿ&nbsp;Â·&nbsp;iren.</footer><a class=entry-link aria-label="post link to kubernetes1.22.0å•èŠ‚ç‚¹é›†ç¾¤éƒ¨ç½²" href=https://blog.mletter.cn/tech/kubernetes/install-kubernetes-1220/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://blog.mletter.cn/page/3/>Â«&nbsp;ä¸Šä¸€é¡µ&nbsp;
</a><a class=next href=https://blog.mletter.cn/page/5/>ä¸‹ä¸€é¡µ&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://blog.mletter.cn/>å¤ªé˜³å¯ä»¥æ˜¯è“è‰²</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span><br><span id=span style=color:#101011></span>
<script type=text/javascript>function runtime(){const a=new Date("12/07/2020 12:50:18"),r=new Date,c=r.getTime()-a.getTime(),l=24*60*60*1e3,e=c/l,t=Math.floor(e),n=(e-t)*24,s=Math.floor(n),o=(n-s)*60,i=Math.floor(o),d=Math.floor((o-i)*60);document.getElementById("span").innerHTML="å·²è¿è¡Œ: "+t+"å¤©"+s+"å°æ—¶"+i+"åˆ†"+d+"ç§’"}runtime(),setInterval(runtime,1e3)</script><br><font color=#101011>æœ¬ç«™ç”± <a href=https://www.netlify.com/ rel="noopener noreferrer nofollow" target=_blank>Netlify</a> æä¾›è®¡ç®—æœåŠ¡, ç”± <a href=https://www.netlify.com/ rel="noopener noreferrer nofollow" target=_blank>Netlify</a> æä¾›å…¨ç«™åŠ é€ŸæœåŠ¡ã€‚</font><br></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>const menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=this.getAttribute("href").substr(1),n=document.querySelector(`[id='${decodeURIComponent(t)}']`);window.matchMedia("(prefers-reduced-motion: reduce)").matches?n.scrollIntoView():n.scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>const mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.classList.contains("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>
>>>>>>> 7231e1571b2b22531187d3efcd415c5d2ac0ff2e
