<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Gin on</title><link>https://blog.mletter.cn/tags/gin/</link><description>Recent content in Gin on</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Sat, 26 Aug 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://blog.mletter.cn/tags/gin/index.xml" rel="self" type="application/rss+xml"/><item><title>维扣-专属你的拍照摄影社区</title><link>https://blog.mletter.cn/posts/wecho/</link><pubDate>Sat, 26 Aug 2023 00:00:00 +0000</pubDate><guid>https://blog.mletter.cn/posts/wecho/</guid><description>WEcho 介绍 一个发布树洞和摄影的小软件 我给这个程序起了两个名字Whisper(耳语)、Echo(回声),目前我在想如何把他们两个组合起来,所以我目前打算给它去一个奇葩的名字叫做&amp;quot;维扣&amp;quot; 我想让大家有一个私密的树洞和一个可以分享自己图片的地方 功能展示 原型地址：https://modao.cc/app/wEWpHIxirx936ySg8ixQz7 树洞功能： 只允许用户发布树洞,并且对树洞进行点赞和热度排行以及分享,暂不做其他用途 其他功能暂时还在想… 摄影社区功能 支持图文混编,以标题+内容+图片的方式展示自己的摄影作品 点击图文可以查看详细+下载该图片功能 可对图片进行收藏、点赞、分享、搜索 发现页可以查看近期热门壁纸、壁纸分类等内容 个人详细页面：显示自己个人信息资料片 遵循Restful接口的规范 此接口并不代表最终接口
一个数据对象大致分为以下五个接口
GET /treeholes : 获取树洞列表 POST /treeholes : 发布一条树洞 GET /treeholes/:tree_id : 获取单个树洞内容详细 PUT /treeholes/:tree_id: 修改单个树洞内容详细 DELETE /treeholes/:tree_id: 删除单个树洞详细 基本的后端技术栈 Go MeiliSearch: 一款好用的搜索引擎 Gorm: 简单好用搞笑的ORM框架 Gin: 速度极快的Web框架 Minio: 分布式存储 项目目录 还没写呢 项目缓存规范 RedisKey的规范 project:module:business:uk 项目名 模块名 业务名 唯一标识 用户信息模块缓存 这部分还没设计完成,等待完善吧。 Key 类型 过期时间 说明 Wecho:user:login_user:{user_id} string 2天 存储用户生成的JWT Wecho:users:cache HSET 2天 用HSET缓存用户信息 数据库设计 用户表结构 1CREATE TABLE `users` ( 2 `id` int(11) NOT NULL AUTO_INCREMENT COMMENT &amp;#39;唯一标识一个用户的编号，通常使用自增长整数来表示&amp;#39;, 3 `username` varchar(50) NOT NULL COMMENT &amp;#39;注册登录用户名&amp;#39;, 4 `nickname` varchar(50) DEFAULT &amp;#39;该用户未设置nickname&amp;#39; COMMENT &amp;#39;用户在树洞中使用的昵称，可以包含中英文字符和数字&amp;#39;, 5 `password` varchar(255) NOT NULL COMMENT &amp;#39;用户登录树洞时需要使用的密码&amp;#39;, 6 `phone` varchar(20) NOT NULL COMMENT &amp;#39;用户在注册时提供的手机号码&amp;#39;, 7 `gender` enum(&amp;#39;F&amp;#39;,&amp;#39;M&amp;#39;,&amp;#39;Nil&amp;#39;) NOT NULL DEFAULT &amp;#39;Nil&amp;#39; COMMENT &amp;#39;用户的性别，可以使用枚举类型（0男、1女、2保密）&amp;#39;, 8 `avatar` varchar(255) DEFAULT NULL COMMENT &amp;#39;用户上传或选择的头像图片的文件路径或URL地址&amp;#39;, 9 `status` int(1) unsigned zerofill NOT NULL DEFAULT &amp;#39;0&amp;#39; COMMENT &amp;#39;用户的状态: 0: 禁用 1: 启用&amp;#39;, 10 `tree_count` int(10) unsigned NOT NULL DEFAULT &amp;#39;0&amp;#39; COMMENT &amp;#39;用户发布的树洞数量&amp;#39;, 11 `like_count` int(11) NOT NULL DEFAULT &amp;#39;0&amp;#39; COMMENT &amp;#39;用户所有树洞的点赞总数&amp;#39;, 12 `is_banned` int(1) NOT NULL DEFAULT &amp;#39;0&amp;#39; COMMENT &amp;#39;用户是否被管理员禁言 0: 无禁言 1: 已禁言&amp;#39;, 13 `is_blocked` int(4) NOT NULL DEFAULT &amp;#39;0&amp;#39; COMMENT &amp;#39;用户是否被管理员封号 0: 无封号 1: 已封号&amp;#39;, 14 `created_at` bigint(20) NOT NULL COMMENT &amp;#39;创建时间&amp;#39;, 15 `updated_at` bigint(20) NOT NULL COMMENT &amp;#39;更新时间&amp;#39;, 16 `register_at` bigint(20) NOT NULL COMMENT &amp;#39;用户在树洞中注册的时间，使用日期时间类型来表示&amp;#39;, 17 `last_login_time` bigint(20) DEFAULT NULL COMMENT &amp;#39;用户最近一次登录树洞的时间，使用日期时间类型来表示&amp;#39;, 18 `is_admin` int(1) NOT NULL DEFAULT &amp;#39;0&amp;#39; COMMENT &amp;#39;是否为管理员用户 0: 不是 1: 是&amp;#39;, 19 `is_del` int(1) NOT NULL DEFAULT &amp;#39;0&amp;#39; COMMENT &amp;#39;用户是否注销 true=正常 false=注销&amp;#39;, 20 `description` varchar(255) DEFAULT &amp;#39;该用户未设置签名&amp;#39; COMMENT &amp;#39;用户签名或描述信息&amp;#39;, 21 PRIMARY KEY (`id`) USING BTREE, 22 UNIQUE KEY `username` (`username`) USING BTREE, 23 UNIQUE KEY `phone` (`phone`) USING BTREE 24) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 ROW_FORMAT=DYNAMIC; 字段名 类型 是否为空 主键/索引 注释 id INT NOT NULL AUTO_INCREMENT 唯一标识一个用户的编号，通常使用自增长整数来表示 树洞表结构 1CREATE TABLE treehole ( 2 id INT UNSIGNED AUTO_INCREMENT PRIMARY KEY, 3 title VARCHAR(255) NOT NULL, 4 content TEXT NOT NULL, 5 user_id INT UNSIGNED, 6 category_id INT UNSIGNED, 7 status TINYINT(1) DEFAULT 1, 8 views INT UNSIGNED DEFAULT 0, 9 likes INT UNSIGNED DEFAULT 0, 10 created_at DATETIME NOT NULL, 11 updated_at DATETIME NOT NULL, 12 receive_gifts INT DEFAULT 0 13) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci; 字段名 数据类型 约束 描述 id int PRIMARY KEY, AUTO_INCREMENT 树洞的自增id treehole_id string NOT NULL 树洞的唯一标识符 title varchar(255) NOT NULL 树洞的主题或标题 content text NOT NULL 树洞的内容 created_at datetime NOT NULL 树洞创建的时间 updated_at datetime NOT NULL 树洞最后更新的时间 user_id int NOT NULL 发布树洞的用户ID category_id int NOT NULL 树洞的分类ID status tinyint(1) DEFAULT 1 树洞的状态：1为正常，0为已删除 views int DEFAULT 0 树洞的浏览量 likes int DEFAULT 0 树洞的点赞数 receive_gifts int DEFAULT 0 树洞帖子的收礼数量</description></item></channel></rss>