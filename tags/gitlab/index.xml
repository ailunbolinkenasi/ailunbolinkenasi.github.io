<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<<<<<<< HEAD
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Gitlab on Heartbeat Diary</title>
    <link>https://blog.mletter.cn/tags/gitlab/</link>
    <description>Recent content in Gitlab on Heartbeat Diary</description>
    <generator>Hugo -- 0.146.5</generator>
    <language>zh</language>
    <lastBuildDate>Tue, 16 Jan 2024 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://blog.mletter.cn/tags/gitlab/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ç®¡ç†å¥½å†…éƒ¨çš„ä»£ç ä»“åº“-GitLabç¯‡</title>
      <link>https://blog.mletter.cn/tech/gitlab/repository-management/</link>
      <pubDate>Tue, 16 Jan 2024 00:00:00 +0000</pubDate>
      <guid>https://blog.mletter.cn/tech/gitlab/repository-management/</guid>
      <description>&lt;p&gt;ä»Šå¤©èŠèŠå¦‚ä½•æ¥ç®¡ç†æˆ‘ä»¬çš„&lt;code&gt;ä»£ç ä»“åº“&lt;/code&gt;
=======
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>Gitlab on å¤ªé˜³å¯ä»¥æ˜¯è“è‰²</title>
        <link>https://blog.mletter.cn/tags/gitlab/</link>
        <description>Recent content in Gitlab on å¤ªé˜³å¯ä»¥æ˜¯è“è‰²</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <copyright>Live and learn. ğŸŒ±</copyright>
        <lastBuildDate>Tue, 16 Jan 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://blog.mletter.cn/tags/gitlab/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>ç®¡ç†å¥½å†…éƒ¨çš„ä»£ç ä»“åº“-GitLabç¯‡</title>
        <link>https://blog.mletter.cn/tech/gitlab/repository-management/</link>
        <pubDate>Tue, 16 Jan 2024 00:00:00 +0000</pubDate>
        
        <guid>https://blog.mletter.cn/tech/gitlab/repository-management/</guid>
        <description>&lt;p&gt;ä»Šå¤©èŠèŠå¦‚ä½•æ¥ç®¡ç†æˆ‘ä»¬çš„&lt;code&gt;ä»£ç ä»“åº“&lt;/code&gt;
>>>>>>> e6c11e7684b5a835a7809ddc8609bc9f39cdf2c5
åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä»£ç ä»“åº“æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç»„æˆéƒ¨åˆ†ã€‚å®ƒä¸ä»…æ˜¯å­˜å‚¨ä»£ç çš„åœ°æ–¹ï¼Œä¹Ÿæ˜¯å›¢é˜Ÿåä½œå’Œç‰ˆæœ¬æ§åˆ¶çš„åŸºç¡€ã€‚å› æ­¤ï¼Œç®¡ç†å¥½è‡ªå·±çš„ä»£ç ä»“åº“è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨Gitæ¥ç®¡ç†è‡ªå·±çš„ä»£ç ä»“åº“ã€‚&lt;/p&gt;
&lt;h2 id=&#34;éƒ¨ç½²gitlab&#34;&gt;&lt;/h&gt;éƒ¨ç½²GitLab
&lt;/h2&gt;&lt;p&gt;ç›¸è¾ƒäºä¼ åŠ¨çš„éƒ¨ç½²æ–¹å¼æ¯”è¾ƒç¹çï¼Œæˆ‘è¿™é‡Œç›´æ¥é‡‡ç”¨&lt;code&gt;docker&lt;/code&gt;çš„éƒ¨ç½²æ–¹å¼æ¥éƒ¨ç½²&lt;code&gt;gitlab&lt;/code&gt;ä»¥æ–¹ä¾¿åç»­ç®¡ç†ã€‚&lt;/p&gt;
&lt;p&gt;è¯´ä¸€ä¸‹ä½¿ç”¨Dockeræ¥éƒ¨ç½²çš„ä¸€äº›ç—›ç‚¹ï¼š&lt;/p&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ•°æ®å¤‡ä»½ï¼šåœ¨&lt;code&gt;Docker&lt;/code&gt;ä¸­è¿è¡Œ&lt;code&gt;Gitlab&lt;/code&gt;ï¼Œéœ€è¦å®šæœŸå¤‡ä»½æ•°æ®ä»¥é˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚ä½†æ˜¯å¤‡ä»½æ•°æ®çš„è¿‡ç¨‹å¯èƒ½ä¼šå¾ˆéº»çƒ¦ï¼Œå¹¶ä¸”éœ€è¦è®¾ç½®åˆé€‚çš„ç­–ç•¥æ¥é¿å…æ•°æ®ä¸¢å¤±ã€‚æ‰€ä»¥è¿™æ˜¯æˆ‘è§‰å¾—ä¸ç®¡æ˜¯&lt;code&gt;GitLab&lt;/code&gt;è¿˜æ˜¯å…¶ä»–çš„åº”ç”¨ï¼Œä¿è¯æ•°æ®çš„å®Œæ•´å¯é æ€§æ˜¯è‡³å…³é‡è¦çš„ã€‚ &lt;/p&gt;&lt;/li&gt;
&lt;li&gt;ç‰ˆæœ¬æ›´æ–°ï¼š&lt;code&gt;Docker&lt;/code&gt;éƒ¨ç½²&lt;code&gt;Gitlab&lt;/code&gt;éœ€è¦æ—¶åˆ»å…³æ³¨ç‰ˆæœ¬æ›´æ–°ï¼Œéœ€è¦è¿›è¡Œå‡çº§æˆ–è€…è¿ç§»ï¼Œä¸»è¦æ˜¯æ•°æ®è¿ç§»çš„æ•°æ®ä¿éšœå·¥ä½œéœ€è¦é¢å¤–æ³¨æ„ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;å¥½äº†æˆ‘ä»¬å¸¦ç€ä¸Šé¢çš„ä¸¤ç‚¹é—®é¢˜ï¼Œæˆ‘ä»¬å…ˆæ¥ä½¿ç”¨&lt;code&gt;docker&lt;/code&gt;éƒ¨ç½²&lt;code&gt;GitLab&lt;/code&gt;ç„¶åå†æ…¢æ…¢æ¢ç´¢ã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/docker/compose/releases/download/v2.24.0/docker-compose-linux-x86_64&#34;&gt;DockerCompose&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;æˆ‘ä»¬ä½¿ç”¨&lt;code&gt;docker-compose&lt;/code&gt;æ¥éƒ¨ç½²&lt;code&gt;gitlab&lt;/code&gt;ä»“åº“ç¨‹åºï¼Œæ³¨æ„é•œåƒç‰ˆæœ¬ã€‚å¦‚æœä½ æ˜¯å°Šè´µçš„&lt;code&gt;ee&lt;/code&gt;ç”¨æˆ·è¯·ä¿®æ”¹é•œåƒã€‚å¦‚æœä½ æ˜¯æ™®é€šçš„&lt;code&gt;ce&lt;/code&gt;ç”¨æˆ·ç›´æ¥å¤åˆ¶å°±è¡Œã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;3.6&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;services&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;web&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;gitlab/gitlab-ce:latest&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;restart&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;always&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# æŒ‡å®šgitlabä¸»æœºåç§°&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hostname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;gitlab.example.com&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;environment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;GITLAB_OMNIBUS_CONFIG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        # gitlabè®¿é—®åœ°å€
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        external_url &amp;#39;http://10.1.6.100&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;s1&#34;&gt;&amp;#39;80:80&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;s1&#34;&gt;&amp;#39;443:443&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;s1&#34;&gt;&amp;#39;2212:22&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# é˜²æ­¢ä¸æœ¬åœ°çš„22ç«¯å£è¿›è¡Œå†²çª&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;s1&#34;&gt;&amp;#39;/data/gitlab-app/config:/etc/gitlab&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;s1&#34;&gt;&amp;#39;/data/gitlab-app/logs:/var/log/gitlab&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;s1&#34;&gt;&amp;#39;/data/gitlab-app/data:/var/opt/gitlab&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;shm_size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;256m&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;å¯åŠ¨&lt;code&gt;gitlab&lt;/code&gt;ç¨‹åº&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;root@localhost gitlab-app&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# docker-compose up -d&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;+&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Running 1/1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; âœ” Container gitlab-app-web-1  Started
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;éƒ¨ç½²å®Œæˆåçš„ä¸€äº›ç›¸å…³è®¾ç½®å¯ä»¥å‚è€ƒ&lt;a href=&#34;https://docs.gitlab.com/ee/install/next_steps.html&#34;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
<<<<<<< HEAD
&lt;p&gt;å®é™…ä¸Šåˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„ä¸€ä¸ªä»£ç ä»“åº“å°±å·²ç»åˆ›å»ºå®Œæˆäº†ï¼Œå‰©ä¸‹çš„å·¥ä½œå°±æ˜¯åœ¨UIç•Œé¢ç‚¹ç‚¹ç‚¹ã€‚æˆ‘å°±ä¸å¤šèµ˜è¿°äº†ä¸»è¦è®²è®²å¦‚ä½•å¤‡ä»½çš„é—®é¢˜ã€‚&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>ä»Šå¤©èŠèŠå¦‚ä½•æ¥ç®¡ç†æˆ‘ä»¬çš„<code>ä»£ç ä»“åº“</code>
åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä»£ç ä»“åº“æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ç»„æˆéƒ¨åˆ†ã€‚å®ƒä¸ä»…æ˜¯å­˜å‚¨ä»£ç çš„åœ°æ–¹ï¼Œä¹Ÿæ˜¯å›¢é˜Ÿåä½œå’Œç‰ˆæœ¬æ§åˆ¶çš„åŸºç¡€ã€‚å› æ­¤ï¼Œç®¡ç†å¥½è‡ªå·±çš„ä»£ç ä»“åº“è‡³å…³é‡è¦ã€‚</p>
<p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨Gitæ¥ç®¡ç†è‡ªå·±çš„ä»£ç ä»“åº“ã€‚</p>
<h2 id="éƒ¨ç½²gitlab">éƒ¨ç½²GitLab</h2>
<p>ç›¸è¾ƒäºä¼ åŠ¨çš„éƒ¨ç½²æ–¹å¼æ¯”è¾ƒç¹çï¼Œæˆ‘è¿™é‡Œç›´æ¥é‡‡ç”¨<code>docker</code>çš„éƒ¨ç½²æ–¹å¼æ¥éƒ¨ç½²<code>gitlab</code>ä»¥æ–¹ä¾¿åç»­ç®¡ç†ã€‚</p>
<p>è¯´ä¸€ä¸‹ä½¿ç”¨Dockeræ¥éƒ¨ç½²çš„ä¸€äº›ç—›ç‚¹ï¼š</p></p>
<ol>
<li>æ•°æ®å¤‡ä»½ï¼šåœ¨<code>Docker</code>ä¸­è¿è¡Œ<code>Gitlab</code>ï¼Œéœ€è¦å®šæœŸå¤‡ä»½æ•°æ®ä»¥é˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚ä½†æ˜¯å¤‡ä»½æ•°æ®çš„è¿‡ç¨‹å¯èƒ½ä¼šå¾ˆéº»çƒ¦ï¼Œå¹¶ä¸”éœ€è¦è®¾ç½®åˆé€‚çš„ç­–ç•¥æ¥é¿å…æ•°æ®ä¸¢å¤±ã€‚æ‰€ä»¥è¿™æ˜¯æˆ‘è§‰å¾—ä¸ç®¡æ˜¯<code>GitLab</code>è¿˜æ˜¯å…¶ä»–çš„åº”ç”¨ï¼Œä¿è¯æ•°æ®çš„å®Œæ•´å¯é æ€§æ˜¯è‡³å…³é‡è¦çš„ã€‚ </p></li>
<li>ç‰ˆæœ¬æ›´æ–°ï¼š<code>Docker</code>éƒ¨ç½²<code>Gitlab</code>éœ€è¦æ—¶åˆ»å…³æ³¨ç‰ˆæœ¬æ›´æ–°ï¼Œéœ€è¦è¿›è¡Œå‡çº§æˆ–è€…è¿ç§»ï¼Œä¸»è¦æ˜¯æ•°æ®è¿ç§»çš„æ•°æ®ä¿éšœå·¥ä½œéœ€è¦é¢å¤–æ³¨æ„ã€‚</li>
</ol>
<blockquote>
<p>å¥½äº†æˆ‘ä»¬å¸¦ç€ä¸Šé¢çš„ä¸¤ç‚¹é—®é¢˜ï¼Œæˆ‘ä»¬å…ˆæ¥ä½¿ç”¨<code>docker</code>éƒ¨ç½²<code>GitLab</code>ç„¶åå†æ…¢æ…¢æ¢ç´¢ã€‚</p></blockquote>
<ul>
<li><a href="https://github.com/docker/compose/releases/download/v2.24.0/docker-compose-linux-x86_64">DockerCompose</a></li>
</ul>
<ol>
<li>æˆ‘ä»¬ä½¿ç”¨<code>docker-compose</code>æ¥éƒ¨ç½²<code>gitlab</code>ä»“åº“ç¨‹åºï¼Œæ³¨æ„é•œåƒç‰ˆæœ¬ã€‚å¦‚æœä½ æ˜¯å°Šè´µçš„<code>ee</code>ç”¨æˆ·è¯·ä¿®æ”¹é•œåƒã€‚å¦‚æœä½ æ˜¯æ™®é€šçš„<code>ce</code>ç”¨æˆ·ç›´æ¥å¤åˆ¶å°±è¡Œã€‚</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;3.6&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">services</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">web</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;gitlab/gitlab-ce:latest&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">always</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="c"># æŒ‡å®šgitlabä¸»æœºåç§°</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">hostname</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;gitlab.example.com&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">GITLAB_OMNIBUS_CONFIG</span><span class="p">:</span><span class="w"> </span><span class="p">|</span><span class="sd">
</span></span></span><span class="line"><span class="cl"><span class="sd">        # gitlabè®¿é—®åœ°å€
</span></span></span><span class="line"><span class="cl"><span class="sd">        external_url &#39;http://10.1.6.100&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s1">&#39;80:80&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s1">&#39;443:443&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s1">&#39;2212:22&#39;</span><span class="w"> </span><span class="c"># é˜²æ­¢ä¸æœ¬åœ°çš„22ç«¯å£è¿›è¡Œå†²çª</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s1">&#39;/data/gitlab-app/config:/etc/gitlab&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s1">&#39;/data/gitlab-app/logs:/var/log/gitlab&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="s1">&#39;/data/gitlab-app/data:/var/opt/gitlab&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">shm_size</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;256m&#39;</span><span class="w">
</span></span></span></code></pre></div><ol start="2">
<li>å¯åŠ¨<code>gitlab</code>ç¨‹åº</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost gitlab-app<span class="o">]</span><span class="c1"># docker-compose up -d</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>+<span class="o">]</span> Running 1/1
</span></span><span class="line"><span class="cl"> âœ” Container gitlab-app-web-1  Started
</span></span></code></pre></div><ol start="3">
<li>éƒ¨ç½²å®Œæˆåçš„ä¸€äº›ç›¸å…³è®¾ç½®å¯ä»¥å‚è€ƒ<a href="https://docs.gitlab.com/ee/install/next_steps.html">å®˜æ–¹æ–‡æ¡£</a></li>
</ol>
<p>å®é™…ä¸Šåˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„ä¸€ä¸ªä»£ç ä»“åº“å°±å·²ç»åˆ›å»ºå®Œæˆäº†ï¼Œå‰©ä¸‹çš„å·¥ä½œå°±æ˜¯åœ¨UIç•Œé¢ç‚¹ç‚¹ç‚¹ã€‚æˆ‘å°±ä¸å¤šèµ˜è¿°äº†ä¸»è¦è®²è®²å¦‚ä½•å¤‡ä»½çš„é—®é¢˜ã€‚</p>
<h2 id="å¦‚ä½•é«˜æ•ˆçš„è¿›è¡Œå®¹å™¨å¤‡ä»½">å¦‚ä½•é«˜æ•ˆçš„è¿›è¡Œå®¹å™¨å¤‡ä»½</h2>
<ul>
<li>å½“ç„¶äº†å¦‚æœä½ æƒ³ä¿è¯æ›´å®‰å…¨çš„æ•°æ®å¤‡ä»½å¯ä»¥åœ¨æ·±å¤œ<code>stop</code>æ‰ä½ çš„ä»£ç ä»“åº“ä»è€Œè¿›è¡Œåœæœºå¤‡ä»½(æš‚ä¸é‡‡å–)</li>
<li>ç®€å•å¤‡ä»½å’Œæ‰©å±•å¤‡ä»½</li>
</ul>
<h3 id="ç®€å•å¤‡ä»½">ç®€å•å¤‡ä»½</h3>
<p>å¦‚æœæ‚¨ä½¿ç”¨æ•°æ®é‡å°‘äº 100 GBçš„å¯ä»¥ä½¿ç”¨ä¸€ä¸‹ä¸‰ä¸ªæ­¥éª¤è¿›è¡Œå¤‡ä»½</p>
<ol>
<li>è¿è¡Œå¤‡ä»½å‘½ä»¤</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">GitLab 12.2 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼š
</span></span><span class="line"><span class="cl">docker <span class="nb">exec</span> -t &lt;container name&gt; gitlab-backup create
</span></span></code></pre></div><p>è¾“å‡ºç¤ºä¾‹</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">Dumping database tables:
</span></span><span class="line"><span class="cl">- Dumping table events... [DONE]
</span></span><span class="line"><span class="cl">- Dumping table issues... [DONE]
</span></span><span class="line"><span class="cl">- Dumping table keys... [DONE]
</span></span><span class="line"><span class="cl">- Dumping table merge_requests... [DONE]
</span></span><span class="line"><span class="cl">- Dumping table milestones... [DONE]
</span></span><span class="line"><span class="cl">- Dumping table namespaces... [DONE]
</span></span><span class="line"><span class="cl">- Dumping table notes... [DONE]
</span></span><span class="line"><span class="cl">- Dumping table projects... [DONE]
</span></span><span class="line"><span class="cl">- Dumping table protected_branches... [DONE]
</span></span><span class="line"><span class="cl">- Dumping table schema_migrations... [DONE]
</span></span><span class="line"><span class="cl">- Dumping table services... [DONE]
</span></span><span class="line"><span class="cl">- Dumping table snippets... [DONE]
</span></span><span class="line"><span class="cl">- Dumping table taggings... [DONE]
</span></span><span class="line"><span class="cl">- Dumping table tags... [DONE]
</span></span><span class="line"><span class="cl">- Dumping table users... [DONE]
</span></span><span class="line"><span class="cl">- Dumping table users_projects... [DONE]
</span></span><span class="line"><span class="cl">- Dumping table web_hooks... [DONE]
</span></span><span class="line"><span class="cl">- Dumping table wikis... [DONE]
</span></span><span class="line"><span class="cl">Dumping repositories:
</span></span><span class="line"><span class="cl">- Dumping repository abcd... [DONE]
</span></span><span class="line"><span class="cl">Creating backup archive: &lt;backup-id&gt;_gitlab_backup.tar [DONE]
</span></span><span class="line"><span class="cl">Deleting tmp directories...[DONE]
</span></span><span class="line"><span class="cl">Deleting old backups... [SKIPPING]
</span></span></code></pre></div><p>è¿™é‡Œè¯´æ˜ä¸€ä¸‹å…³äº<code>å¤‡ä»½ç­–ç•¥é€‰é¡¹</code>çš„é€‰é¡¹</p>
<ul>
<li>æ›´å¤šåœ°å¤‡ä»½é€‰é¡¹å¯ä»¥å‚è€ƒ<a href="https://docs.gitlab.com/ee/administration/backup_restore/backup_gitlab.html?tab=Docker">å®˜æ–¹æ–‡æ¡£</a></li>
</ul>
<p><code>tar</code>é»˜è®¤å¤‡ä»½ç­–ç•¥æœ¬è´¨ä¸Šæ˜¯ä½¿ç”¨ Linux å‘½ä»¤å’Œå°†æ•°æ®ä»ç›¸åº”çš„æ•°æ®ä½ç½®æµå¼ä¼ è¾“åˆ°å¤‡ä»½<code>gzip</code>ã€‚è¿™åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å·¥ä½œæ­£å¸¸ï¼Œä½†å½“æ•°æ®å¿«é€Ÿå˜åŒ–æ—¶å¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ã€‚</p>
<p><code>tar</code>å½“è¯»å–æ•°æ®æ—¶æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œ<code>file changed as we read it</code>å¯èƒ½ä¼šå‘ç”Ÿé”™è¯¯ï¼Œå¹¶å¯¼è‡´å¤‡ä»½è¿‡ç¨‹å¤±è´¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨åä¸º çš„å¤‡ä»½ç­–ç•¥<code>copy</code>ã€‚<code>tar</code>è¯¥ç­–ç•¥åœ¨è°ƒç”¨å’Œä¹‹å‰å°†æ•°æ®æ–‡ä»¶å¤åˆ¶åˆ°ä¸´æ—¶ä½ç½®<code>gzip</code>ï¼Œä»¥é¿å…é”™è¯¯ã€‚</p>
<p>å‰¯ä½œç”¨æ˜¯å¤‡ä»½è¿‡ç¨‹ä¼šé¢å¤–å ç”¨ 1X çš„ç£ç›˜ç©ºé—´ã€‚è¯¥è¿‡ç¨‹ä¼šå°½åŠ›æ¸…ç†æ¯ä¸ªé˜¶æ®µçš„ä¸´æ—¶æ–‡ä»¶ï¼Œå› æ­¤é—®é¢˜ä¸ä¼šå˜å¾—å¤æ‚ï¼Œä½†å¯¹äºå¤§å‹å®‰è£…æ¥è¯´ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªç›¸å½“å¤§çš„å˜åŒ–ã€‚
è¦ä½¿ç”¨è¯¥<code>copy</code>ç­–ç•¥è€Œä¸æ˜¯é»˜è®¤çš„æµç­–ç•¥ï¼Œè¯· <code>STRATEGY=copy</code>åœ¨ <code>Rake</code> ä»»åŠ¡å‘½ä»¤ä¸­æŒ‡å®šã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker <span class="nb">exec</span> -t &lt;container name&gt; gitlab-backup create <span class="nv">STRATEGY</span><span class="o">=</span>copy
</span></span></code></pre></div><ol start="2">
<li>
<p>è€ƒè™‘å°†å¤‡ä»½å‡ºæ¥çš„ç›¸å…³æ–‡ä»¶ä¸Šä¼ åˆ°<code>å¯¹è±¡å­˜å‚¨</code>: ä¾‹å¦‚ S3ã€<code>Minio</code>ç­‰ç¨‹åºã€‚</p>
</li>
<li>
<p>æ‰‹åŠ¨å¤‡ä»½<code>gitlab.rb</code>å’Œ<code>gitlab-secrets.json</code>ã€‚æ‚¨å¯èƒ½è¿˜éœ€è¦å¤‡ä»½æ‰€æœ‰ TLS å¯†é’¥å’Œè¯ä¹¦ <code>/etc/gitlab/ssl</code>ã€<code>/etc/gitlab/trusted-certs</code> ä»¥åŠ SSH ä¸»æœºå¯†é’¥ã€‚</p>
</li>
</ol>
<blockquote>
<p>å¦‚æœè¿™ä¸¤ç§æ–‡ä»¶ä¸¢å¤±è¯·å‚è€ƒ<a href="https://docs.gitlab.com/ee/administration/backup_restore/troubleshooting_backup_gitlab.html#when-the-secrets-file-is-lost">å®˜æ–¹æ–‡æ¡£</a></p></blockquote>
<h2 id="æ¢å¤ä¿å­˜çš„æ•°æ®">æ¢å¤ä¿å­˜çš„æ•°æ®</h2>
<p>é¦–å…ˆæ¢å¤æ•°æ®è¦æ»¡è¶³çš„ä¸€äº›<code>å‰ææ¡ä»¶</code></p>
<ol>
<li>ç›®æ ‡ GitLab å®ä¾‹å¿…é¡»å·²åœ¨è¿è¡Œ</li>
<li>ç›®æ ‡ GitLab å®ä¾‹å¿…é¡»å…·æœ‰å®Œå…¨ç›¸åŒçš„ç‰ˆæœ¬</li>
<li>å¿…é¡»æ¢å¤ GitLab æœºå¯†é…ç½®æ–‡ä»¶</li>
<li>æŸäº› GitLab é…ç½®å¿…é¡»ä¸åŸå§‹å¤‡ä»½ç¯å¢ƒåŒ¹é…ï¼šä¾‹å¦‚TLSè¯ä¹¦ç­‰å†…å®¹</li>
<li>æ¢å¤ä½œä¸ºæŒ‚è½½ç‚¹çš„ç›®å½•ï¼š<a href="https://docs.gitlab.com/ee/administration/nfs.html">è¯¦ç»†å‚è€ƒ</a></li>
</ol>
<p>ä¸‹é¢æˆ‘ä»¬æ¥å…·ä½“çœ‹ä¸€ä¸‹å¦‚ä½•æ¢å¤å·²ç»ä»<code>gitlab</code>ä¸­å¤‡ä»½çš„æ•°æ®å†…å®¹ä»¥åŠä»“åº“ç­‰ä¿¡æ¯ã€‚</p>
<ol>
<li>å¦‚æœä½¿ç”¨<code>Docker Swarm</code>ï¼Œå®¹å™¨å¯èƒ½ä¼šåœ¨æ¢å¤è¿‡ç¨‹ä¸­é‡æ–°å¯åŠ¨ï¼Œå› ä¸º<code>Puma</code>å·²å…³é—­ï¼Œå› æ­¤å®¹å™¨è¿è¡ŒçŠ¶å†µæ£€æŸ¥å¤±è´¥ã€‚è¦è§£å†³æ­¤é—®é¢˜ï¼Œè¯·æš‚æ—¶ç¦ç”¨è¿è¡ŒçŠ¶å†µæ£€æŸ¥æœºåˆ¶ã€‚</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="c"># ä¿®æ”¹docker-compose.yaml</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nt">healthcheck</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">disable</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span></code></pre></div><ol start="2">
<li>éƒ¨ç½²å †æ ˆä¿¡æ¯(ä»…é™äº<code>DockerSwarm</code>)ï¼Œå…³äºä¸ºå•¥è¿™æ ·åšè¯·å‚è€ƒ<a href="https://gitlab.com/gitlab-org/omnibus-gitlab/-/issues/6846">issuse6846</a></li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">docker stack deploy --compose-file docker-compose.yml mystack
</span></span></code></pre></div><ol start="3">
<li>æ¢å¤æ­¥éª¤</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># é¦–å…ˆåœæ­¢pumaå’Œsidekiq</span>
</span></span><span class="line"><span class="cl">docker <span class="nb">exec</span> -it &lt;name of container&gt; gitlab-ctl stop puma
</span></span><span class="line"><span class="cl">docker <span class="nb">exec</span> -it &lt;name of container&gt; gitlab-ctl stop sidekiq
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ç„¶åæŸ¥çœ‹gitlabç›¸å…³ç»„ä»¶çš„çŠ¶æ€ puma:down sidekiq:down</span>
</span></span><span class="line"><span class="cl">docker <span class="nb">exec</span> -it &lt;name of container&gt; gitlab-ctl status
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å¼€å§‹æ¢å¤æŒ‡å®šçš„å¤‡ä»½æ–‡ä»¶</span>
</span></span><span class="line"><span class="cl">docker <span class="nb">exec</span> -it &lt;name of container&gt; gitlab-backup restore <span class="nv">BACKUP</span><span class="o">=</span>11493107454_2018_04_25_10.6.4-ce
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># é‡å¯ä½ çš„gitlab</span>
</span></span><span class="line"><span class="cl">docker-compose restart
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ£€æŸ¥ç›¸å…³çš„å…ƒæ•°æ®ä¿¡æ¯</span>
</span></span><span class="line"><span class="cl">docker <span class="nb">exec</span> -it &lt;name of container&gt; gitlab-rake gitlab:check <span class="nv">SANITIZE</span><span class="o">=</span><span class="nb">true</span>
</span></span></code></pre></div><p>è¿™å¤§æ¦‚å°±æ˜¯ä¸€ä¸ª<code>gitlab</code>å¤‡ä»½å®Œæ•´çš„æ¢å¤è¿‡ç¨‹ï¼Œå½“ç„¶æœ¬æ–‡æ²¡æœ‰æ¶‰åŠåˆ°çš„ç›¸å…³å†…å®¹å¯ä»¥é€šè¿‡å‚è€ƒå®˜ç½‘æ–‡æ¡£(ä¸Šé¢æœ‰å†™)æ¥è¿›è¡Œæ‰©å……ã€‚</p>
]]></content:encoded>
    </item>
  </channel>
=======
&lt;p&gt;å®é™…ä¸Šåˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„ä¸€ä¸ªä»£ç ä»“åº“å°±å·²ç»åˆ›å»ºå®Œæˆäº†ï¼Œå‰©ä¸‹çš„å·¥ä½œå°±æ˜¯åœ¨UIç•Œé¢ç‚¹ç‚¹ç‚¹ã€‚æˆ‘å°±ä¸å¤šèµ˜è¿°äº†ä¸»è¦è®²è®²å¦‚ä½•å¤‡ä»½çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¦‚ä½•é«˜æ•ˆçš„è¿›è¡Œå®¹å™¨å¤‡ä»½&#34;&gt;&lt;/h&gt;å¦‚ä½•é«˜æ•ˆçš„è¿›è¡Œå®¹å™¨å¤‡ä»½
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;å½“ç„¶äº†å¦‚æœä½ æƒ³ä¿è¯æ›´å®‰å…¨çš„æ•°æ®å¤‡ä»½å¯ä»¥åœ¨æ·±å¤œ&lt;code&gt;stop&lt;/code&gt;æ‰ä½ çš„ä»£ç ä»“åº“ä»è€Œè¿›è¡Œåœæœºå¤‡ä»½(æš‚ä¸é‡‡å–)&lt;/li&gt;
&lt;li&gt;ç®€å•å¤‡ä»½å’Œæ‰©å±•å¤‡ä»½&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç®€å•å¤‡ä»½&#34;&gt;&lt;/h&gt;ç®€å•å¤‡ä»½
&lt;/h3&gt;&lt;p&gt;å¦‚æœæ‚¨ä½¿ç”¨æ•°æ®é‡å°‘äº 100 GBçš„å¯ä»¥ä½¿ç”¨ä¸€ä¸‹ä¸‰ä¸ªæ­¥éª¤è¿›è¡Œå¤‡ä»½&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è¿è¡Œå¤‡ä»½å‘½ä»¤&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;GitLab 12.2 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼š
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; -t &amp;lt;container name&amp;gt; gitlab-backup create
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¾“å‡ºç¤ºä¾‹&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-txt&#34; data-lang=&#34;txt&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Dumping database tables:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- Dumping table events... [DONE]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- Dumping table issues... [DONE]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- Dumping table keys... [DONE]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- Dumping table merge_requests... [DONE]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- Dumping table milestones... [DONE]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- Dumping table namespaces... [DONE]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- Dumping table notes... [DONE]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- Dumping table projects... [DONE]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- Dumping table protected_branches... [DONE]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- Dumping table schema_migrations... [DONE]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- Dumping table services... [DONE]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- Dumping table snippets... [DONE]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- Dumping table taggings... [DONE]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- Dumping table tags... [DONE]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- Dumping table users... [DONE]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- Dumping table users_projects... [DONE]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- Dumping table web_hooks... [DONE]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- Dumping table wikis... [DONE]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Dumping repositories:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- Dumping repository abcd... [DONE]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Creating backup archive: &amp;lt;backup-id&amp;gt;_gitlab_backup.tar [DONE]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Deleting tmp directories...[DONE]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Deleting old backups... [SKIPPING]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œè¯´æ˜ä¸€ä¸‹å…³äº&lt;code&gt;å¤‡ä»½ç­–ç•¥é€‰é¡¹&lt;/code&gt;çš„é€‰é¡¹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ›´å¤šåœ°å¤‡ä»½é€‰é¡¹å¯ä»¥å‚è€ƒ&lt;a class=&#34;link&#34; href=&#34;https://docs.gitlab.com/ee/administration/backup_restore/backup_gitlab.html?tab=Docker&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;tar&lt;/code&gt;é»˜è®¤å¤‡ä»½ç­–ç•¥æœ¬è´¨ä¸Šæ˜¯ä½¿ç”¨ Linux å‘½ä»¤å’Œå°†æ•°æ®ä»ç›¸åº”çš„æ•°æ®ä½ç½®æµå¼ä¼ è¾“åˆ°å¤‡ä»½&lt;code&gt;gzip&lt;/code&gt;ã€‚è¿™åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹å·¥ä½œæ­£å¸¸ï¼Œä½†å½“æ•°æ®å¿«é€Ÿå˜åŒ–æ—¶å¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;tar&lt;/code&gt;å½“è¯»å–æ•°æ®æ—¶æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œ&lt;code&gt;file changed as we read it&lt;/code&gt;å¯èƒ½ä¼šå‘ç”Ÿé”™è¯¯ï¼Œå¹¶å¯¼è‡´å¤‡ä»½è¿‡ç¨‹å¤±è´¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨åä¸º çš„å¤‡ä»½ç­–ç•¥&lt;code&gt;copy&lt;/code&gt;ã€‚&lt;code&gt;tar&lt;/code&gt;è¯¥ç­–ç•¥åœ¨è°ƒç”¨å’Œä¹‹å‰å°†æ•°æ®æ–‡ä»¶å¤åˆ¶åˆ°ä¸´æ—¶ä½ç½®&lt;code&gt;gzip&lt;/code&gt;ï¼Œä»¥é¿å…é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;å‰¯ä½œç”¨æ˜¯å¤‡ä»½è¿‡ç¨‹ä¼šé¢å¤–å ç”¨ 1X çš„ç£ç›˜ç©ºé—´ã€‚è¯¥è¿‡ç¨‹ä¼šå°½åŠ›æ¸…ç†æ¯ä¸ªé˜¶æ®µçš„ä¸´æ—¶æ–‡ä»¶ï¼Œå› æ­¤é—®é¢˜ä¸ä¼šå˜å¾—å¤æ‚ï¼Œä½†å¯¹äºå¤§å‹å®‰è£…æ¥è¯´ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªç›¸å½“å¤§çš„å˜åŒ–ã€‚
è¦ä½¿ç”¨è¯¥&lt;code&gt;copy&lt;/code&gt;ç­–ç•¥è€Œä¸æ˜¯é»˜è®¤çš„æµç­–ç•¥ï¼Œè¯· &lt;code&gt;STRATEGY=copy&lt;/code&gt;åœ¨ &lt;code&gt;Rake&lt;/code&gt; ä»»åŠ¡å‘½ä»¤ä¸­æŒ‡å®šã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; -t &amp;lt;container name&amp;gt; gitlab-backup create &lt;span class=&#34;nv&#34;&gt;STRATEGY&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;copy
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;
&lt;p&gt;è€ƒè™‘å°†å¤‡ä»½å‡ºæ¥çš„ç›¸å…³æ–‡ä»¶ä¸Šä¼ åˆ°&lt;code&gt;å¯¹è±¡å­˜å‚¨&lt;/code&gt;: ä¾‹å¦‚ S3ã€&lt;code&gt;Minio&lt;/code&gt;ç­‰ç¨‹åºã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ‰‹åŠ¨å¤‡ä»½&lt;code&gt;gitlab.rb&lt;/code&gt;å’Œ&lt;code&gt;gitlab-secrets.json&lt;/code&gt;ã€‚æ‚¨å¯èƒ½è¿˜éœ€è¦å¤‡ä»½æ‰€æœ‰ TLS å¯†é’¥å’Œè¯ä¹¦ &lt;code&gt;/etc/gitlab/ssl&lt;/code&gt;ã€&lt;code&gt;/etc/gitlab/trusted-certs&lt;/code&gt; ä»¥åŠ SSH ä¸»æœºå¯†é’¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;å¦‚æœè¿™ä¸¤ç§æ–‡ä»¶ä¸¢å¤±è¯·å‚è€ƒ&lt;a class=&#34;link&#34; href=&#34;https://docs.gitlab.com/ee/administration/backup_restore/troubleshooting_backup_gitlab.html#when-the-secrets-file-is-lost&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;h2 id=&#34;æ¢å¤ä¿å­˜çš„æ•°æ®&#34;&gt;&lt;/h&gt;æ¢å¤ä¿å­˜çš„æ•°æ®
&lt;/h2&gt;&lt;p&gt;é¦–å…ˆæ¢å¤æ•°æ®è¦æ»¡è¶³çš„ä¸€äº›&lt;code&gt;å‰ææ¡ä»¶&lt;/code&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç›®æ ‡ GitLab å®ä¾‹å¿…é¡»å·²åœ¨è¿è¡Œ&lt;/li&gt;
&lt;li&gt;ç›®æ ‡ GitLab å®ä¾‹å¿…é¡»å…·æœ‰å®Œå…¨ç›¸åŒçš„ç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;å¿…é¡»æ¢å¤ GitLab æœºå¯†é…ç½®æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;æŸäº› GitLab é…ç½®å¿…é¡»ä¸åŸå§‹å¤‡ä»½ç¯å¢ƒåŒ¹é…ï¼šä¾‹å¦‚TLSè¯ä¹¦ç­‰å†…å®¹&lt;/li&gt;
&lt;li&gt;æ¢å¤ä½œä¸ºæŒ‚è½½ç‚¹çš„ç›®å½•ï¼š&lt;a class=&#34;link&#34; href=&#34;https://docs.gitlab.com/ee/administration/nfs.html&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;è¯¦ç»†å‚è€ƒ&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ¥å…·ä½“çœ‹ä¸€ä¸‹å¦‚ä½•æ¢å¤å·²ç»ä»&lt;code&gt;gitlab&lt;/code&gt;ä¸­å¤‡ä»½çš„æ•°æ®å†…å®¹ä»¥åŠä»“åº“ç­‰ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¦‚æœä½¿ç”¨&lt;code&gt;Docker Swarm&lt;/code&gt;ï¼Œå®¹å™¨å¯èƒ½ä¼šåœ¨æ¢å¤è¿‡ç¨‹ä¸­é‡æ–°å¯åŠ¨ï¼Œå› ä¸º&lt;code&gt;Puma&lt;/code&gt;å·²å…³é—­ï¼Œå› æ­¤å®¹å™¨è¿è¡ŒçŠ¶å†µæ£€æŸ¥å¤±è´¥ã€‚è¦è§£å†³æ­¤é—®é¢˜ï¼Œè¯·æš‚æ—¶ç¦ç”¨è¿è¡ŒçŠ¶å†µæ£€æŸ¥æœºåˆ¶ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;# ä¿®æ”¹docker-compose.yaml&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;healthcheck&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;disable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;éƒ¨ç½²å †æ ˆä¿¡æ¯(ä»…é™äº&lt;code&gt;DockerSwarm&lt;/code&gt;)ï¼Œå…³äºä¸ºå•¥è¿™æ ·åšè¯·å‚è€ƒ&lt;a class=&#34;link&#34; href=&#34;https://gitlab.com/gitlab-org/omnibus-gitlab/-/issues/6846&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;issuse6846&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker stack deploy --compose-file docker-compose.yml mystack
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;æ¢å¤æ­¥éª¤&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# é¦–å…ˆåœæ­¢pumaå’Œsidekiq&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; -it &amp;lt;name of container&amp;gt; gitlab-ctl stop puma
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; -it &amp;lt;name of container&amp;gt; gitlab-ctl stop sidekiq
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ç„¶åæŸ¥çœ‹gitlabç›¸å…³ç»„ä»¶çš„çŠ¶æ€ puma:down sidekiq:down&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; -it &amp;lt;name of container&amp;gt; gitlab-ctl status
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å¼€å§‹æ¢å¤æŒ‡å®šçš„å¤‡ä»½æ–‡ä»¶&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; -it &amp;lt;name of container&amp;gt; gitlab-backup restore &lt;span class=&#34;nv&#34;&gt;BACKUP&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;11493107454_2018_04_25_10.6.4-ce
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# é‡å¯ä½ çš„gitlab&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker-compose restart
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ£€æŸ¥ç›¸å…³çš„å…ƒæ•°æ®ä¿¡æ¯&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; -it &amp;lt;name of container&amp;gt; gitlab-rake gitlab:check &lt;span class=&#34;nv&#34;&gt;SANITIZE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™å¤§æ¦‚å°±æ˜¯ä¸€ä¸ª&lt;code&gt;gitlab&lt;/code&gt;å¤‡ä»½å®Œæ•´çš„æ¢å¤è¿‡ç¨‹ï¼Œå½“ç„¶æœ¬æ–‡æ²¡æœ‰æ¶‰åŠåˆ°çš„ç›¸å…³å†…å®¹å¯ä»¥é€šè¿‡å‚è€ƒå®˜ç½‘æ–‡æ¡£(ä¸Šé¢æœ‰å†™)æ¥è¿›è¡Œæ‰©å……ã€‚&lt;/p&gt;
</description>
        </item>
        
    </channel>
>>>>>>> e6c11e7684b5a835a7809ddc8609bc9f39cdf2c5
</rss>
