<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<<<<<<< HEAD
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>å¾®æœåŠ¡ on Heartbeat Diary</title>
    <link>https://blog.mletter.cn/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/</link>
    <description>Recent content in å¾®æœåŠ¡ on Heartbeat Diary</description>
    <generator>Hugo -- 0.146.5</generator>
    <language>zh</language>
    <lastBuildDate>Wed, 08 May 2024 00:00:00 +0000</lastBuildDate>
    <atom:link href="https://blog.mletter.cn/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>ä¼˜é›…çš„å¤šé˜¶æ®µæ„å»ºå¾®æœåŠ¡é•œåƒ</title>
      <link>https://blog.mletter.cn/tech/docker/review-docker/</link>
      <pubDate>Wed, 08 May 2024 00:00:00 +0000</pubDate>
      <guid>https://blog.mletter.cn/tech/docker/review-docker/</guid>
      <description>å¦‚ä½•ä½¿ç”¨Dockerçš„å¤šé˜¶æ®µæ„å»ºåŠŸèƒ½æ¥ä¼˜é›…çš„æ„å»ºæœåŠ¡é•œåƒ</description>
      <content:encoded><![CDATA[<h2 id="å€ŸåŠ©maven-wrapper">å€ŸåŠ©Maven Wrapper</h2>
<p>é¦–å…ˆæˆ‘ä»¬è¯´è¯´<code>maven wrapper</code>çš„ä½¿ç”¨åœºæ™¯</p>
<p>å‡è®¾æˆ‘ä»¬æ‰€åœ¨çš„å›¢é˜ŸåŒæ—¶ç»´æŠ¤å¤šä¸ªé¡¹ç›®ï¼Œä¸åŒçš„é¡¹ç›®ä½¿ç”¨çš„<code>JDK</code>ç‰ˆæœ¬ä¸åŒï¼Œä½¿ç”¨çš„<code>maven</code>ç‰ˆæœ¬ä¹Ÿä¸åŒï¼Œé‚£ä¹ˆä¸ºäº†æ”¯æŒå¤šé¡¹ç›®å¼€å‘ï¼Œä¸ºäº†æ„å»ºè¿è¡Œæ•ˆæœä¸€è‡´ï¼Œä½ å¯èƒ½éœ€è¦åœ¨æœ¬åœ°ç®¡ç†å¤šä¸ª<code>maven</code>ç‰ˆæœ¬ï¼Œè¿™ä¼šéå¸¸ç¹çï¼Œä»è€Œå¼•å‡ºäº†<code>maven wrapper</code>æ¥è§£å†³è¿™ä¸ª<code>maven</code>ç‰ˆæœ¬çš„ç®¡ç†é—®é¢˜ã€‚</p>
<ul>
<li>ç‰ˆæœ¬ä¸€è‡´æ€§ï¼šé€šè¿‡åœ¨<code>mvnw</code>é…ç½®ä¸­æŒ‡å®š Maven ç‰ˆæœ¬ï¼Œç¡®ä¿æ‰€æœ‰å¼€å‘äººå‘˜å’ŒæŒç»­é›†æˆç¯å¢ƒä½¿ç”¨ç›¸åŒçš„<code>maven</code>ç‰ˆæœ¬ã€‚</li>
<li>ç®€åŒ–æ‰¹é‡å®‰è£…ï¼šä¸éœ€è¦é¢„å…ˆå®‰è£…<code>maven</code>ï¼Œç›´æ¥è¿è¡Œ<code>mvnw</code>å‘½ä»¤å°±å¦‚å®‰è£…äº†<code>mvn</code>ä¸€æ ·ï¼Œä»è€Œç®€åŒ–äº†é¡¹ç›®çš„åˆå§‹è®¾ç½®å’Œé…ç½®ã€‚</li>
</ul>
<h2 id="maven-wrapperå®‰è£…æ–¹å¼">Maven Wrapperå®‰è£…æ–¹å¼</h2>
<ul>
<li><a href="https://maven.apache.org/wrapper/maven-wrapper/">maven-wrapper</a>: æä¾›<code>maven-wrapper.jar</code>ä¸‹è½½ã€å®‰è£…å’Œè¿è¡Œç›®æ ‡<code>maven</code>å‘è¡Œç‰ˆã€‚</li>
<li><a href="https://maven.apache.org/wrapper/maven-wrapper-distribution/">maven-wrapper-distribution</a>: æä¾›<code>mvnw</code>/<code>mvnw.cmd</code>è„šæœ¬å‘è¡Œç‰ˆï¼Œ</li>
<li><a href="https://maven.apache.org/wrapper/maven-wrapper-plugin/">maven-wrapper-plugin</a>: <code>wrapper</code>ç”¨äºè½»æ¾å°† Wrapper å®‰è£…åˆ°é¡¹ç›®ä¸­çš„æ’ä»¶ã€‚</li>
</ul>
<ol>
<li>é¦–å…ˆå®‰è£…<code>maven wrapper</code>,é»˜è®¤æƒ…å†µä¸‹å®‰è£…çš„æ˜¯<code>only-script</code>ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯ç²¾ç®€ç‰ˆï¼Œä¸éœ€è¦é¢å¤–çš„<code>maven-wrapper.jar</code>ã€‚å¦‚æœä½ éœ€è¦å®‰è£…<code>source</code>ç‰ˆæœ¬è¯·ä½¿ç”¨<code>-Dtype=source</code>å‚æ•°ã€‚</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># å‡è®¾ä½ çš„æœ¬åœ°å·²ç»æœ‰äº†ä¸€ä¸ªç‰¹å®šç‰ˆæœ¬çš„maven,å¯ä»¥ç›´æ¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¿›è¡Œå¼•å…¥</span>
</span></span><span class="line"><span class="cl">mvn -N wrapper:wrapper
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å½“ç„¶ä¹Ÿå¯ä»¥æŒ‡å®šå¼•å…¥çš„mavenç‰ˆæœ¬ä¿¡æ¯</span>
</span></span><span class="line"><span class="cl">mvn -N wrapper:wrapper -Dmaven<span class="o">=</span>3.6.1
</span></span></code></pre></div><ol start="2">
<li>æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ,æ­£å¸¸æ¥è®²æ˜¯ä¼šå‡ºç°ä¸€ä¸ª<code>mvnw</code>å’Œ<code>mvnw.cmd</code>ä»¥åŠ<code>.mvn</code>ç›®å½•</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost maven-wrapper<span class="o">]</span><span class="c1"># tree -fa</span>
</span></span><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl">â”œâ”€â”€ ./.mvn
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ ./.mvn/wrapper
</span></span><span class="line"><span class="cl">â”‚       â””â”€â”€ ./.mvn/wrapper/maven-wrapper.properties
</span></span><span class="line"><span class="cl">â”œâ”€â”€ ./mvnw
</span></span><span class="line"><span class="cl">â””â”€â”€ ./mvnw.cmd
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="m">2</span> directories, <span class="m">3</span> files
</span></span></code></pre></div><ol start="3">
<li>ä¿®æ”¹<code>maven-wrapper.properties</code>å®šä¹‰çš„è·¯å¾„åœ°å€ï¼Œå› ä¸ºç”¨çš„æ˜¯å®˜æ–¹åœ°å€å¯èƒ½ç”±äºå¢™çš„é—®é¢˜æ— æ³•è¿›è¡Œä¸‹è½½ï¼Œæˆ‘è¿™è¾¹é‡‡ç”¨<code>MinioS3</code>çš„åœ°å€æ¥æå‰ä¸‹å¥½ç›¸å…³ç‰ˆæœ¬çš„<code>maven</code>åŒ…è¿›è¡Œä¸Šä¼ ã€‚</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-properties" data-lang="properties"><span class="line"><span class="cl"><span class="na">wrapperVersion</span><span class="o">=</span><span class="s">3.3.1</span>
</span></span><span class="line"><span class="cl"><span class="na">distributionUrl</span><span class="o">=</span><span class="s">https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.6.1/apache-maven-3.6.1-bin.zip</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># æ­£å¸¸ä¿®æ”¹distributionUrlçš„åœ°å€å°±å¯ä»¥äº†</span>
</span></span><span class="line"><span class="cl"><span class="na">distributionUrl</span><span class="o">=</span><span class="s">http://10.1.6.15:10240/software/apache-maven-3.6.1-bin.zip</span>
</span></span></code></pre></div><p>æ­£å¸¸èƒ½æ£€æµ‹åˆ°ç›¸å…³çš„ç‰ˆæœ¬å³è¡¨ç¤ºæˆåŠŸ</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>root@localhost maven-wrapper<span class="o">]</span><span class="c1"># ./mvnw --version</span>
</span></span><span class="line"><span class="cl">Apache Maven 3.6.1 <span class="o">(</span>d66c9c0b3152b2e69ee9bac180bb8fcc8e6af555<span class="p">;</span> 2019-04-05T03:00:29+08:00<span class="o">)</span>
</span></span><span class="line"><span class="cl">Maven home: /root/.m2/wrapper/dists/apache-maven-3.6.1/5256b4e
</span></span><span class="line"><span class="cl">Java version: 1.8.0_391, vendor: Oracle Corporation, runtime: /usr/local/java/jre
</span></span><span class="line"><span class="cl">Default locale: en_US, platform encoding: UTF-8
</span></span><span class="line"><span class="cl">OS name: <span class="s2">&#34;linux&#34;</span>, version: <span class="s2">&#34;4.18.0-372.9.1.el8.x86_64&#34;</span>, arch: <span class="s2">&#34;amd64&#34;</span>, family: <span class="s2">&#34;unix&#34;</span>
</span></span></code></pre></div><h2 id="é‡åˆ°å°é—®é¢˜">é‡åˆ°å°é—®é¢˜</h2>
<p>å¦‚æœå¤§å®¶åœ¨æ„å»ºçš„è¿‡ç¨‹ä¸­é‡åˆ°äº†å°é—®é¢˜å¯ä»¥çœ‹çœ‹å°æ€è·¯</p>
<ol>
<li>é—®é¢˜ä¸€ï¼šæˆ‘æ˜æ˜æŒ‡å®šäº†<code>distributionUrl</code>ä¸ºæˆ‘è‡ªçš„ä»“åº“åœ°å€ï¼Œå¹¶ä¸”æˆ‘ä¸Šä¼ çš„æ˜¯<code>zip</code>çš„åŒ…ï¼Œä¸ºä»€ä¹ˆæ¯æ¬¡æˆ‘æ‰§è¡Œçš„çš„æ—¶å€™éƒ½ä¼šæç¤º<code>wget: Failed to fetch http://10.1.6.15:10240/software/apache-maven-3.6.1-bin.tar.gz</code></li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># select .zip or .tar.gz</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> ! <span class="nb">command</span> -v unzip &gt;/dev/null<span class="p">;</span> <span class="k">then</span>
</span></span><span class="line"><span class="cl">  <span class="nv">distributionUrl</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">distributionUrl</span><span class="p">%.zip</span><span class="si">}</span><span class="s2">.tar.gz&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nv">distributionUrlName</span><span class="o">=</span><span class="s2">&#34;</span><span class="si">${</span><span class="nv">distributionUrl</span><span class="p">##*/</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">fi</span>
</span></span></code></pre></div><blockquote>
<p>å…³äºæœ¬é—®é¢˜çš„è§£é‡Šï¼šç”±äºå®˜æ–¹çš„mvnwè„šæœ¬å½“ä¸­å­˜åœ¨select zip or tar.gzçš„æ–‡ä»¶ç±»å‹åˆ¤æ–­ï¼Œæ‰€ä»¥å½“æœåŠ¡å™¨ä¸Šæ²¡æœ‰<code>unzip</code>çš„å‘½ä»¤çš„æ—¶å€™ä¼šå‡ºç°å¦‚ä¸Šæç¤ºã€‚</p></blockquote>
<h2 id="å®˜æ–¹çš„dockerfile">å®˜æ–¹çš„Dockerfile</h2>
<ul>
<li>å…¶å®éƒ½æ˜¯å¼•ç”¨äº†<code>BuildKit</code>çš„ä¸€äº›ç‰¹æ€§ï¼Œå¦‚æœéœ€è¦äº†è§£æ›´å¤šçš„è¯å¯ä»¥ä½¿ç”¨<code>docker Desktop</code>æ¥è¿›è¡Œåˆå§‹åŒ–çœ‹ä¸€ä¸‹å®˜æ–¹å†™çš„è¿™äº›è„šæœ¬ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="line"><span class="cl"><span class="c"># syntax=docker/dockerfile:1</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Comments are provided throughout this file to help you get started.</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># If you need more help, visit the Dockerfile reference guide at</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># https://docs.docker.com/go/dockerfile-reference/</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Want to help us make this template better? Share your feedback here: https://forms.gle/ybq9Krt8jtBL3iCk7</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c">################################################################################</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Create a stage for resolving and downloading dependencies.</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> eclipse-temurin:17-jdk-jammy as deps</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">WORKDIR</span><span class="s"> /build</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Copy the mvnw wrapper with executable permissions.</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> --chmod<span class="o">=</span><span class="m">0755</span> mvnw mvnw<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> .mvn/ .mvn/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Download dependencies as a separate step to take advantage of Docker&#39;s caching.</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Leverage a cache mount to /root/.m2 so that subsequent builds don&#39;t have to</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># re-download packages.</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>bind,source<span class="o">=</span>pom.xml,target<span class="o">=</span>pom.xml <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>cache,target<span class="o">=</span>/root/.m2 ./mvnw dependency:go-offline -DskipTests<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c">################################################################################</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Create a stage for building the application based on the stage with downloaded dependencies.</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># This Dockerfile is optimized for Java applications that output an uber jar, which includes</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># all the dependencies needed to run your app inside a JVM. If your app doesn&#39;t output an uber</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># jar and instead relies on an application server like Apache Tomcat, you&#39;ll need to update this</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># stage with the correct filename of your package and update the base image of the &#34;final&#34; stage</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># use the relevant app server, e.g., using tomcat (https://hub.docker.com/_/tomcat/) as a base image.</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> deps as package</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">WORKDIR</span><span class="s"> /build</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> ./src src/<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">RUN</span> --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>bind,source<span class="o">=</span>pom.xml,target<span class="o">=</span>pom.xml <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --mount<span class="o">=</span><span class="nv">type</span><span class="o">=</span>cache,target<span class="o">=</span>/root/.m2 <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    ./mvnw package -DskipTests <span class="o">&amp;&amp;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    mv target/<span class="k">$(</span>./mvnw help:evaluate -Dexpression<span class="o">=</span>project.artifactId -q -DforceStdout<span class="k">)</span>-<span class="k">$(</span>./mvnw help:evaluate -Dexpression<span class="o">=</span>project.version -q -DforceStdout<span class="k">)</span>.jar target/app.jar<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c">################################################################################</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Create a new stage for running the application that contains the minimal</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># runtime dependencies for the application. This often uses a different base</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># image from the install or build stage where the necessary files are copied</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># from the install stage.</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c">#</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># The example below uses eclipse-turmin&#39;s JRE image as the foundation for running the app.</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># By specifying the &#34;17-jre-jammy&#34; tag, it will also use whatever happens to be the</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># most recent version of that tag when you build your Dockerfile.</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># If reproducability is important, consider using a specific digest SHA, like</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># eclipse-temurin@sha256:99cede493dfd88720b610eb8077c8688d3cca50003d76d1d539b0efc8cca72b4.</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">FROM</span><span class="s"> eclipse-temurin:17-jre-jammy AS final</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Create a non-privileged user that the app will run under.</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># See https://docs.docker.com/go/dockerfile-user-best-practices/</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">ARG</span> <span class="nv">UID</span><span class="o">=</span><span class="m">10001</span>
</span></span><span class="line"><span class="cl"><span class="k">RUN</span> adduser <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --disabled-password <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --gecos <span class="s2">&#34;&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --home <span class="s2">&#34;/nonexistent&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --shell <span class="s2">&#34;/sbin/nologin&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --no-create-home <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    --uid <span class="s2">&#34;</span><span class="si">${</span><span class="nv">UID</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>    appuser<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">USER</span><span class="s"> appuser</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="c"># Copy the executable from the &#34;package&#34; stage.</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">COPY</span> --from<span class="o">=</span>package build/target/app.jar app.jar<span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">EXPOSE</span><span class="s"> 9000</span><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err">
</span></span></span><span class="line"><span class="cl"><span class="err"></span><span class="k">ENTRYPOINT</span> <span class="p">[</span> <span class="s2">&#34;java&#34;</span><span class="p">,</span> <span class="s2">&#34;-jar&#34;</span><span class="p">,</span> <span class="s2">&#34;app.jar&#34;</span> <span class="p">]</span><span class="err">
</span></span></span></code></pre></div><blockquote>
<p>å¦å¤–è¯´ä¸€å¥ï¼šæˆ‘æ°¸è¿œç›¸ä¿¡æœ€ä½³å®è·µçš„å†…å®¹ï¼Œä½†æ˜¯å¤§å‚çš„ä¸œè¥¿ä¸€å®šé€‚åˆå¤§å‚ï¼Œä½†æ˜¯ä¸ä¸€å®šé€‚åˆä½ è‡ªå·±ï¼Œæ‰€ä»¥æˆ‘è§‰å¾—åº”è¯¥å¸¦ä¸€äº›è¾¨è¯çš„çœ¼å…‰å»çœ‹å¾…æœ€ä½³å®è·µçš„è¿™äº›å†…å®¹ã€‚</p></blockquote>
]]></content:encoded>
    </item>
  </channel>
=======
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>å¾®æœåŠ¡ on å¤ªé˜³å¯ä»¥æ˜¯è“è‰²</title>
        <link>https://blog.mletter.cn/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/</link>
        <description>Recent content in å¾®æœåŠ¡ on å¤ªé˜³å¯ä»¥æ˜¯è“è‰²</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <copyright>Live and learn. ğŸŒ±</copyright>
        <lastBuildDate>Wed, 08 May 2024 00:00:00 +0000</lastBuildDate><atom:link href="https://blog.mletter.cn/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>ä¼˜é›…çš„å¤šé˜¶æ®µæ„å»ºå¾®æœåŠ¡é•œåƒ</title>
        <link>https://blog.mletter.cn/tech/docker/review-docker/</link>
        <pubDate>Wed, 08 May 2024 00:00:00 +0000</pubDate>
        
        <guid>https://blog.mletter.cn/tech/docker/review-docker/</guid>
        <description>&lt;img src="https://img12.360buyimg.com/ddimg/jfs/t1/221585/17/40296/38910/663b8f0aF38d1916d/5d09c604af566108.jpg" alt="Featured image of post ä¼˜é›…çš„å¤šé˜¶æ®µæ„å»ºå¾®æœåŠ¡é•œåƒ" /&gt;&lt;h2 id=&#34;å€ŸåŠ©maven-wrapper&#34;&gt;&lt;/h&gt;å€ŸåŠ©Maven Wrapper
&lt;/h2&gt;&lt;p&gt;é¦–å…ˆæˆ‘ä»¬è¯´è¯´&lt;code&gt;maven wrapper&lt;/code&gt;çš„ä½¿ç”¨åœºæ™¯&lt;/p&gt;
&lt;p&gt;å‡è®¾æˆ‘ä»¬æ‰€åœ¨çš„å›¢é˜ŸåŒæ—¶ç»´æŠ¤å¤šä¸ªé¡¹ç›®ï¼Œä¸åŒçš„é¡¹ç›®ä½¿ç”¨çš„&lt;code&gt;JDK&lt;/code&gt;ç‰ˆæœ¬ä¸åŒï¼Œä½¿ç”¨çš„&lt;code&gt;maven&lt;/code&gt;ç‰ˆæœ¬ä¹Ÿä¸åŒï¼Œé‚£ä¹ˆä¸ºäº†æ”¯æŒå¤šé¡¹ç›®å¼€å‘ï¼Œä¸ºäº†æ„å»ºè¿è¡Œæ•ˆæœä¸€è‡´ï¼Œä½ å¯èƒ½éœ€è¦åœ¨æœ¬åœ°ç®¡ç†å¤šä¸ª&lt;code&gt;maven&lt;/code&gt;ç‰ˆæœ¬ï¼Œè¿™ä¼šéå¸¸ç¹çï¼Œä»è€Œå¼•å‡ºäº†&lt;code&gt;maven wrapper&lt;/code&gt;æ¥è§£å†³è¿™ä¸ª&lt;code&gt;maven&lt;/code&gt;ç‰ˆæœ¬çš„ç®¡ç†é—®é¢˜ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç‰ˆæœ¬ä¸€è‡´æ€§ï¼šé€šè¿‡åœ¨&lt;code&gt;mvnw&lt;/code&gt;é…ç½®ä¸­æŒ‡å®š Maven ç‰ˆæœ¬ï¼Œç¡®ä¿æ‰€æœ‰å¼€å‘äººå‘˜å’ŒæŒç»­é›†æˆç¯å¢ƒä½¿ç”¨ç›¸åŒçš„&lt;code&gt;maven&lt;/code&gt;ç‰ˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;ç®€åŒ–æ‰¹é‡å®‰è£…ï¼šä¸éœ€è¦é¢„å…ˆå®‰è£…&lt;code&gt;maven&lt;/code&gt;ï¼Œç›´æ¥è¿è¡Œ&lt;code&gt;mvnw&lt;/code&gt;å‘½ä»¤å°±å¦‚å®‰è£…äº†&lt;code&gt;mvn&lt;/code&gt;ä¸€æ ·ï¼Œä»è€Œç®€åŒ–äº†é¡¹ç›®çš„åˆå§‹è®¾ç½®å’Œé…ç½®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;maven-wrapperå®‰è£…æ–¹å¼&#34;&gt;&lt;/h&gt;Maven Wrapperå®‰è£…æ–¹å¼
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://maven.apache.org/wrapper/maven-wrapper/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;maven-wrapper&lt;/a&gt;: æä¾›&lt;code&gt;maven-wrapper.jar&lt;/code&gt;ä¸‹è½½ã€å®‰è£…å’Œè¿è¡Œç›®æ ‡&lt;code&gt;maven&lt;/code&gt;å‘è¡Œç‰ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://maven.apache.org/wrapper/maven-wrapper-distribution/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;maven-wrapper-distribution&lt;/a&gt;: æä¾›&lt;code&gt;mvnw&lt;/code&gt;/&lt;code&gt;mvnw.cmd&lt;/code&gt;è„šæœ¬å‘è¡Œç‰ˆï¼Œ&lt;/li&gt;
&lt;li&gt;&lt;a class=&#34;link&#34; href=&#34;https://maven.apache.org/wrapper/maven-wrapper-plugin/&#34;  target=&#34;_blank&#34; rel=&#34;noopener&#34;
    &gt;maven-wrapper-plugin&lt;/a&gt;: &lt;code&gt;wrapper&lt;/code&gt;ç”¨äºè½»æ¾å°† Wrapper å®‰è£…åˆ°é¡¹ç›®ä¸­çš„æ’ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
&lt;li&gt;é¦–å…ˆå®‰è£…&lt;code&gt;maven wrapper&lt;/code&gt;,é»˜è®¤æƒ…å†µä¸‹å®‰è£…çš„æ˜¯&lt;code&gt;only-script&lt;/code&gt;ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯ç²¾ç®€ç‰ˆï¼Œä¸éœ€è¦é¢å¤–çš„&lt;code&gt;maven-wrapper.jar&lt;/code&gt;ã€‚å¦‚æœä½ éœ€è¦å®‰è£…&lt;code&gt;source&lt;/code&gt;ç‰ˆæœ¬è¯·ä½¿ç”¨&lt;code&gt;-Dtype=source&lt;/code&gt;å‚æ•°ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å‡è®¾ä½ çš„æœ¬åœ°å·²ç»æœ‰äº†ä¸€ä¸ªç‰¹å®šç‰ˆæœ¬çš„maven,å¯ä»¥ç›´æ¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¿›è¡Œå¼•å…¥&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mvn -N wrapper:wrapper
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å½“ç„¶ä¹Ÿå¯ä»¥æŒ‡å®šå¼•å…¥çš„mavenç‰ˆæœ¬ä¿¡æ¯&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mvn -N wrapper:wrapper -Dmaven&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;3.6.1
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸ,æ­£å¸¸æ¥è®²æ˜¯ä¼šå‡ºç°ä¸€ä¸ª&lt;code&gt;mvnw&lt;/code&gt;å’Œ&lt;code&gt;mvnw.cmd&lt;/code&gt;ä»¥åŠ&lt;code&gt;.mvn&lt;/code&gt;ç›®å½•&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;root@localhost maven-wrapper&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# tree -fa&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;â”œâ”€â”€ ./.mvn
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;â”‚   â””â”€â”€ ./.mvn/wrapper
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;â”‚       â””â”€â”€ ./.mvn/wrapper/maven-wrapper.properties
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;â”œâ”€â”€ ./mvnw
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;â””â”€â”€ ./mvnw.cmd
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt; directories, &lt;span class=&#34;m&#34;&gt;3&lt;/span&gt; files
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol start=&#34;3&#34;&gt;
&lt;li&gt;ä¿®æ”¹&lt;code&gt;maven-wrapper.properties&lt;/code&gt;å®šä¹‰çš„è·¯å¾„åœ°å€ï¼Œå› ä¸ºç”¨çš„æ˜¯å®˜æ–¹åœ°å€å¯èƒ½ç”±äºå¢™çš„é—®é¢˜æ— æ³•è¿›è¡Œä¸‹è½½ï¼Œæˆ‘è¿™è¾¹é‡‡ç”¨&lt;code&gt;MinioS3&lt;/code&gt;çš„åœ°å€æ¥æå‰ä¸‹å¥½ç›¸å…³ç‰ˆæœ¬çš„&lt;code&gt;maven&lt;/code&gt;åŒ…è¿›è¡Œä¸Šä¼ ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-properties&#34; data-lang=&#34;properties&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;na&#34;&gt;wrapperVersion&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;3.3.1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;na&#34;&gt;distributionUrl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.6.1/apache-maven-3.6.1-bin.zip&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æ­£å¸¸ä¿®æ”¹distributionUrlçš„åœ°å€å°±å¯ä»¥äº†&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;na&#34;&gt;distributionUrl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;http://10.1.6.15:10240/software/apache-maven-3.6.1-bin.zip&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£å¸¸èƒ½æ£€æµ‹åˆ°ç›¸å…³çš„ç‰ˆæœ¬å³è¡¨ç¤ºæˆåŠŸ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;root@localhost maven-wrapper&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;# ./mvnw --version&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Apache Maven 3.6.1 &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;d66c9c0b3152b2e69ee9bac180bb8fcc8e6af555&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; 2019-04-05T03:00:29+08:00&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Maven home: /root/.m2/wrapper/dists/apache-maven-3.6.1/5256b4e
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Java version: 1.8.0_391, vendor: Oracle Corporation, runtime: /usr/local/java/jre
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Default locale: en_US, platform encoding: UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;OS name: &lt;span class=&#34;s2&#34;&gt;&amp;#34;linux&amp;#34;&lt;/span&gt;, version: &lt;span class=&#34;s2&#34;&gt;&amp;#34;4.18.0-372.9.1.el8.x86_64&amp;#34;&lt;/span&gt;, arch: &lt;span class=&#34;s2&#34;&gt;&amp;#34;amd64&amp;#34;&lt;/span&gt;, family: &lt;span class=&#34;s2&#34;&gt;&amp;#34;unix&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;é‡åˆ°å°é—®é¢˜&#34;&gt;&lt;/h&gt;é‡åˆ°å°é—®é¢˜
&lt;/h2&gt;&lt;p&gt;å¦‚æœå¤§å®¶åœ¨æ„å»ºçš„è¿‡ç¨‹ä¸­é‡åˆ°äº†å°é—®é¢˜å¯ä»¥çœ‹çœ‹å°æ€è·¯&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é—®é¢˜ä¸€ï¼šæˆ‘æ˜æ˜æŒ‡å®šäº†&lt;code&gt;distributionUrl&lt;/code&gt;ä¸ºæˆ‘è‡ªçš„ä»“åº“åœ°å€ï¼Œå¹¶ä¸”æˆ‘ä¸Šä¼ çš„æ˜¯&lt;code&gt;zip&lt;/code&gt;çš„åŒ…ï¼Œä¸ºä»€ä¹ˆæ¯æ¬¡æˆ‘æ‰§è¡Œçš„çš„æ—¶å€™éƒ½ä¼šæç¤º&lt;code&gt;wget: Failed to fetch http://10.1.6.15:10240/software/apache-maven-3.6.1-bin.tar.gz&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# select .zip or .tar.gz&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; ! &lt;span class=&#34;nb&#34;&gt;command&lt;/span&gt; -v unzip &amp;gt;/dev/null&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nv&#34;&gt;distributionUrl&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;distributionUrl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;%.zip&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;.tar.gz&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nv&#34;&gt;distributionUrlName&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;distributionUrl&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;##*/&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;å…³äºæœ¬é—®é¢˜çš„è§£é‡Šï¼šç”±äºå®˜æ–¹çš„mvnwè„šæœ¬å½“ä¸­å­˜åœ¨select zip or tar.gzçš„æ–‡ä»¶ç±»å‹åˆ¤æ–­ï¼Œæ‰€ä»¥å½“æœåŠ¡å™¨ä¸Šæ²¡æœ‰&lt;code&gt;unzip&lt;/code&gt;çš„å‘½ä»¤çš„æ—¶å€™ä¼šå‡ºç°å¦‚ä¸Šæç¤ºã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;h2 id=&#34;å®˜æ–¹çš„dockerfile&#34;&gt;&lt;/h&gt;å®˜æ–¹çš„Dockerfile
&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;å…¶å®éƒ½æ˜¯å¼•ç”¨äº†&lt;code&gt;BuildKit&lt;/code&gt;çš„ä¸€äº›ç‰¹æ€§ï¼Œå¦‚æœéœ€è¦äº†è§£æ›´å¤šçš„è¯å¯ä»¥ä½¿ç”¨&lt;code&gt;docker Desktop&lt;/code&gt;æ¥è¿›è¡Œåˆå§‹åŒ–çœ‹ä¸€ä¸‹å®˜æ–¹å†™çš„è¿™äº›è„šæœ¬ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-dockerfile&#34; data-lang=&#34;dockerfile&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;# syntax=docker/dockerfile:1&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Comments are provided throughout this file to help you get started.&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# If you need more help, visit the Dockerfile reference guide at&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# https://docs.docker.com/go/dockerfile-reference/&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Want to help us make this template better? Share your feedback here: https://forms.gle/ybq9Krt8jtBL3iCk7&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;################################################################################&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Create a stage for resolving and downloading dependencies.&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; eclipse-temurin:17-jdk-jammy as deps&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;WORKDIR&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; /build&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Copy the mvnw wrapper with executable permissions.&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;COPY&lt;/span&gt; --chmod&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0755&lt;/span&gt; mvnw mvnw&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;COPY&lt;/span&gt; .mvn/ .mvn/&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Download dependencies as a separate step to take advantage of Docker&amp;#39;s caching.&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Leverage a cache mount to /root/.m2 so that subsequent builds don&amp;#39;t have to&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# re-download packages.&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;RUN&lt;/span&gt; --mount&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;bind,source&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;pom.xml,target&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;pom.xml &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --mount&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cache,target&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/root/.m2 ./mvnw dependency:go-offline -DskipTests&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;################################################################################&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Create a stage for building the application based on the stage with downloaded dependencies.&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# This Dockerfile is optimized for Java applications that output an uber jar, which includes&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# all the dependencies needed to run your app inside a JVM. If your app doesn&amp;#39;t output an uber&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# jar and instead relies on an application server like Apache Tomcat, you&amp;#39;ll need to update this&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# stage with the correct filename of your package and update the base image of the &amp;#34;final&amp;#34; stage&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# use the relevant app server, e.g., using tomcat (https://hub.docker.com/_/tomcat/) as a base image.&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; deps as package&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;WORKDIR&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; /build&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;COPY&lt;/span&gt; ./src src/&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;RUN&lt;/span&gt; --mount&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;bind,source&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;pom.xml,target&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;pom.xml &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --mount&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cache,target&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/root/.m2 &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    ./mvnw package -DskipTests &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    mv target/&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;./mvnw help:evaluate -Dexpression&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;project.artifactId -q -DforceStdout&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;-&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;./mvnw help:evaluate -Dexpression&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;project.version -q -DforceStdout&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;.jar target/app.jar&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;################################################################################&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Create a new stage for running the application that contains the minimal&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# runtime dependencies for the application. This often uses a different base&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# image from the install or build stage where the necessary files are copied&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# from the install stage.&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# The example below uses eclipse-turmin&amp;#39;s JRE image as the foundation for running the app.&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# By specifying the &amp;#34;17-jre-jammy&amp;#34; tag, it will also use whatever happens to be the&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# most recent version of that tag when you build your Dockerfile.&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# If reproducability is important, consider using a specific digest SHA, like&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# eclipse-temurin@sha256:99cede493dfd88720b610eb8077c8688d3cca50003d76d1d539b0efc8cca72b4.&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; eclipse-temurin:17-jre-jammy AS final&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Create a non-privileged user that the app will run under.&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# See https://docs.docker.com/go/dockerfile-user-best-practices/&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ARG&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;UID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;10001&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;RUN&lt;/span&gt; adduser &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --disabled-password &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --gecos &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --home &lt;span class=&#34;s2&#34;&gt;&amp;#34;/nonexistent&amp;#34;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --shell &lt;span class=&#34;s2&#34;&gt;&amp;#34;/sbin/nologin&amp;#34;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --no-create-home &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --uid &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;UID&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    appuser&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;USER&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; appuser&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Copy the executable from the &amp;#34;package&amp;#34; stage.&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;COPY&lt;/span&gt; --from&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;package build/target/app.jar app.jar&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;EXPOSE&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; 9000&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ENTRYPOINT&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;java&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-jar&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;app.jar&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;å¦å¤–è¯´ä¸€å¥ï¼šæˆ‘æ°¸è¿œç›¸ä¿¡æœ€ä½³å®è·µçš„å†…å®¹ï¼Œä½†æ˜¯å¤§å‚çš„ä¸œè¥¿ä¸€å®šé€‚åˆå¤§å‚ï¼Œä½†æ˜¯ä¸ä¸€å®šé€‚åˆä½ è‡ªå·±ï¼Œæ‰€ä»¥æˆ‘è§‰å¾—åº”è¯¥å¸¦ä¸€äº›è¾¨è¯çš„çœ¼å…‰å»çœ‹å¾…æœ€ä½³å®è·µçš„è¿™äº›å†…å®¹ã€‚&lt;/p&gt;&lt;/blockquote&gt;
</description>
        </item>
        
    </channel>
>>>>>>> e6c11e7684b5a835a7809ddc8609bc9f39cdf2c5
</rss>
